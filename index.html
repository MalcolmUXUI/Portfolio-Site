<!doctype html>
<html lang="en">
<head>
  <!--
    We Three Media – single-file landing page
    Notes:
    - No build tools, no frameworks.
    - Focus: clarity, consistency, accessibility, and easy future edits.
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>We Three Media | Product Strategy, Visual Direction, Brand Styling</title>
  <meta name="description" content="Clear customer paths. Consistent interfaces. Brands people trust." />
  <link rel="canonical" href="https://we3.design/" />
  <meta property="og:title" content="We Three Media | Product Strategy, Visual Direction, Brand Styling" />
  <meta property="og:description" content="Clear customer paths. Consistent interfaces. Brands people trust." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://we3.design/" />
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    @layer tokens, base, components, utilities;

    /* ============================================================
       1) Tokens (palette + semantics)
       ============================================================ */
    @layer tokens {
  :root{
        /* Layout */
        --max: 1050px;
        --stack-max: 680px;
        --gutter: clamp(16px, 4vw, 32px);
        /* Overlay sizing */
        --overlay-width: min(92vw, 1200px);
        --overlay-height: min(92vh, 900px);
        --overlay-radius: 14px;
        --overlay-pad-x: 14px;
        --overlay-pad-y: 12px;
        --overlay-gap: 10px;
        /* Shadows */
        --shadow-card: var(--shadow);
        --shadow-overlay: 0 28px 62px rgba(0,0,0,.24),
          0 12px 28px rgba(0,0,0,.16),
          0 0 0 1px rgba(0,0,0,0.06);
        /* Gradient bars */
        --bar-height: 6px;
        --bar-stripe-size: 260% 100%;
        --bar-speed-base: 24s;
        --bar-speed-alt: 29s;
        --bar-colors: linear-gradient(90deg,
          rgba(var(--accent-warm-rgb), 0.65) 0%,
          rgba(var(--primary-rgb),     0.65) 33%,
          rgba(var(--accent-rare-rgb), 0.65) 66%,
          rgba(var(--accent-warm-rgb), 0.65) 100%);
        /* Case ribbons */
        --ribbon-gap: var(--space-sm);
        --ribbon-speed-a: 108s;
        --ribbon-speed-b: 132s;
        --ribbon-speed-c: 120s;
        --case-media-max: 620px;
        /* Corner radius scale (Material 3-ish) */
        --radius-xs: 4px;
        --radius-sm: 8px;
        --radius-md: 12px;
        --radius-lg: 16px;
        --radius-xl: 24px;
        --radius-pill: 999px;
        /* Legacy default radius (kept for existing rules) */
        --radius: 18px;
        --shadow: 0 14px 40px rgba(17,20,24,.10);
        --space-1: 8px;
        --space-2: 12px;
        --space-3: 16px;
        --space-4: 24px;
        --space-5: 32px;
        --space-6: 40px;
        --space-7: 56px;
        --space-8: 72px;
        /* Tabs */
        --tabs-gap: var(--space-sm);
        --tabs-pad-y: 10px;
        --tabs-pad-x: 14px;
        --tabs-radius: var(--radius-pill);
        --tabs-border: rgba(var(--text-rgb), 0.12);
        --tabs-bg: rgba(var(--surface-card-rgb), 0.85);
        --tabs-bg-active: linear-gradient(180deg, var(--card-top), var(--card-bottom));
        --tabs-shadow: var(--shadow);
        --tabs-text: var(--text);
        --tabs-text-muted: var(--text-muted);
        /* Spacing scale (semantic aliases) */
        --space-xs: var(--space-1);
        --space-sm: var(--space-2);
        --space-md: var(--space-3);
        --space-lg: var(--space-4);
        --space-xl: var(--space-5);
        --space-2xl: var(--space-6);
        --space-3xl: var(--space-7);
        --space-4xl: var(--space-8);

        /* Color (DTCG-ish aliases, hyphenated for CSS) */
        --color-surface-base: var(--surface-base);
        --color-surface-card: var(--surface-card);
        --color-text-primary: var(--text);
        --color-text-muted: var(--text-muted);
        --color-brand-primary: var(--primary);
        --color-brand-accent: var(--accent-warm);
        --color-brand-rare: var(--accent-rare);
        /* Breakpoints (Webflow-ish defaults + large desktop) */
        --bp-xs: 480px;
        --bp-sm: 720px;
        --bp-md: 960px;
        --bp-lg: 1200px;
        --bp-xl: 1440px;
        /* Surfaces */
        --surface-base: #F4EFE7;
        --surface-base-rgb: 244, 239, 231;
        --surface-card: #FFFCF6;
        --surface-card-rgb: 255, 252, 246;

        /* Text */
        --text: #1F1A14;
        --text-rgb: 31, 26, 20;
        --text-muted: #5D4F43;
        --text-muted-rgb: 93, 79, 67;

        /* Brand roles */
        --primary: #0F6D66;
        --primary-rgb: 15, 109, 102;
        --accent-warm: #C4622A;
        --accent-warm-rgb: 196, 98, 42;
        --accent-rare: #9B7AF7;
        --accent-rare-rgb: 155, 122, 247;
        --brand: var(--primary);
        --accent: var(--accent-warm);
        --success: var(--ink-lime);

        /* Dot colors: token-based so they adapt with themes */
        --dot-15: var(--hl-amber);
        --dot-30: var(--hl-lime);
        --dot-60: var(--hl-teal);

        /* Derived utility */
        --link: var(--primary);
        --focus-ring: var(--primary);
        --focus-ring-rgb: var(--primary-rgb);
        --focus-outline: var(--accent);
        --focus-outline-strong: var(--accent);
        --border: #DAD5CE;
        --divider: #E3DED6;

        /* Gradients */
        --grad-wash: linear-gradient(135deg, #F4EFE7 0%, #E6F2EF 100%);
        --grad-underline: linear-gradient(90deg, #0F6D66 0%, #9B7AF7 100%);
        --grad-hero: linear-gradient(90deg, #0F6D66 0%, #37B1A8 55%, #C4622A 100%);

        /* Highlighters (light mode) */
        --hl-amber-rgb: 245, 158, 11;
        --hl-lime-rgb: 181, 196, 68;
        --hl-teal-rgb: 15, 118, 110;
        --hl-blue-rgb: 37, 99, 235;
        --hl-cyan-rgb: 96, 165, 250;
        --hl-lavender-rgb: 155, 122, 247;
        --hl-magenta-rgb: 216, 46, 122;
        --hl-amber: rgba(var(--hl-amber-rgb), 0.85);
        --hl-lime: rgba(var(--hl-lime-rgb), 0.75);
        --hl-teal: rgba(var(--hl-teal-rgb), 0.65);
        --hl-blue: rgba(var(--hl-blue-rgb), 0.75);
        --hl-cyan: rgba(var(--hl-cyan-rgb), 0.55);
        --hl-lavender: rgba(var(--hl-lavender-rgb), 0.50);
        --hl-magenta: rgba(var(--hl-magenta-rgb), 0.55);

        --ink-amber: #E0910C;
        --ink-lime: #A6B33F;
        --ink-teal: #116D65;
        --ink-cyan: #5A97E3;
        --ink-lavender: #8F70E0;

        /* Derived gradients + washes */
        --surface-top: #F7F4EE;
        --surface-bottom: var(--surface-base);
        --card-top: #FFFCF6;
        --card-bottom: #FFFCF7;
        --moon-phase: 0;
        --sun-core: #ffd55e;
        --sun-glow: rgba(255, 213, 94, 0.7);
        --moon-core: #ced4e1;
        --surface-card-soft-96: #FFFCF6;
        --surface-card-soft-86: #FFFCF7;
        --wash1: rgba(var(--accent-warm-rgb), 0.24);
        --wash2: rgba(var(--primary-rgb), 0.20);
        --wash3: rgba(var(--accent-rare-rgb), 0.18);

        /* Glass */
        --glass-surface: rgba(var(--surface-card-rgb), 0.55);
        --glass-surface-strong: rgba(var(--surface-card-rgb), 0.85);
        --glass-tint: rgba(var(--primary-rgb), 0.10);
        --glass-stroke: rgba(var(--text-rgb), 0.14);
        --glass-stroke-strong: rgba(var(--text-rgb), 0.22);
        --glass-sheen: rgba(255,255,255,0.55);
        --glass-sheen-strong: rgba(255,255,255,0.86);
        --glass-shadow: 0 18px 36px rgba(17,20,24,.14);
        --glass-shadow-hover: 0 22px 44px rgba(17,20,24,.18);
        --glass-shadow-press: 0 12px 24px rgba(17,20,24,.12);
        --glass-inner: inset 0 1px 0 rgba(255,255,255,.65);
        --toggle-hit: 40px;
        --toggle-visual: 30px;
        --toggle-inset: calc((var(--toggle-hit) - var(--toggle-visual)) / 2);
        --hero-title-size: clamp(42px, 6vw, 68px);
        /* Type scale (keep it simple) */
        --type-body: 16px;
        --type-meta: 14px;
        --type-h2: clamp(28px, 4.5vw, 42px);
        --type-h3: 26px;
        --type-small: var(--type-body);
        --lh-body: 1.65;
        --lh-tight: 1.2;
        --fw-body: 400;
        --fw-strong: 700;
        --meta-color: var(--text-muted);
        --section-gap: clamp(72px, 6vw + 48px, 104px);
      }

      [data-theme="dark"] {
        --surface-base: #07122D;
        --surface-base-rgb: 7, 18, 45;
        --surface-card: #0C1B3A;
        --surface-card-rgb: 12, 27, 58;
        --text: #F7F2EA;
        --text-rgb: 247, 242, 234;
        --text-muted: #C9B9A8;
        --text-muted-rgb: 201, 185, 168;
        --primary: #37B1A8;
        --primary-rgb: 55, 177, 168;
        --accent-warm: #F2A36C;
        --accent-warm-rgb: 242, 163, 108;
        --accent-rare: #BCA8FF;
        --accent-rare-rgb: 188, 168, 255;
        --bar-colors: linear-gradient(90deg,
          rgba(var(--accent-warm-rgb), 0.65) 0%,
          rgba(var(--primary-rgb),     0.65) 33%,
          rgba(var(--accent-rare-rgb), 0.65) 66%,
          rgba(var(--accent-warm-rgb), 0.65) 100%);
        --link: var(--primary);
        --focus-ring: var(--primary);
        --focus-ring-rgb: var(--primary-rgb);
        --border: #2D364B;
        --divider: #1F2840;

        /* Bioluminescent glows (dark mode) */
        --glow-teal: rgba(15, 109, 102, 0.78);
        --glow-amber: rgba(245, 158, 11, 0.55);
        --glow-coral: rgba(196, 98, 42, 0.55);
        --glow-lilac: rgba(155, 122, 247, 0.62);
        --glow-magenta: rgba(216, 46, 122, 0.62);

        --surface-top: #050D1F;
        --surface-bottom: var(--surface-base);
        --card-top: #0B1935;
        --card-bottom: #0A162E;
        --surface-card-soft-96: #162442;
        --surface-card-soft-86: #2E3B56;
        --wash1: rgba(var(--accent-warm-rgb), 0.22);
        --wash2: rgba(var(--primary-rgb), 0.18);
        --wash3: rgba(var(--accent-rare-rgb), 0.16);

        --glass-surface: rgba(var(--surface-card-rgb), 0.60);
        --glass-surface-strong: rgba(var(--surface-card-rgb), 0.86);
        --glass-tint: rgba(var(--primary-rgb), 0.18);
        --glass-stroke: rgba(255,255,255,0.18);
        --glass-stroke-strong: rgba(255,255,255,0.28);
        --glass-sheen: rgba(255,255,255,0.18);
        --glass-sheen-strong: rgba(255,255,255,0.35);
        --glass-shadow: 0 16px 32px rgba(0,0,0,.45);
        --glass-shadow-hover: 0 22px 44px rgba(0,0,0,.55);
        --glass-shadow-press: 0 12px 24px rgba(0,0,0,.42);
        --glass-inner: inset 0 1px 0 rgba(255,255,255,.08);

        --ink-amber: #F5A621;
        --ink-lime: #BCC955;
        --ink-teal: #26827A;
        --ink-cyan: #6FADF8;
        --ink-lavender: #A486F6;

        --dot-15: color-mix(in srgb, var(--hl-amber) 90%, #000 10%);
        --dot-30: color-mix(in srgb, var(--hl-lime) 60%, var(--card-top, #0B1C2A) 40%);
        --dot-60: color-mix(in srgb, var(--hl-teal) 70%, var(--card-top, #0B1C2A) 30%);
      }

      @media (prefers-color-scheme: dark) {
        :root:not([data-theme]) {
          --surface-base: #07122D;
          --surface-base-rgb: 7, 18, 45;
          --surface-card: #0C1B3A;
          --surface-card-rgb: 12, 27, 58;
          --text: #F7F2EA;
          --text-rgb: 247, 242, 234;
          --text-muted: #C9B9A8;
          --text-muted-rgb: 201, 185, 168;
          --primary: #37B1A8;
          --primary-rgb: 55, 177, 168;
          --accent-warm: #F2A36C;
          --accent-warm-rgb: 242, 163, 108;
          --accent-rare: #BCA8FF;
          --accent-rare-rgb: 188, 168, 255;
          --link: var(--primary);
          --focus-ring: var(--primary);
          --focus-ring-rgb: var(--primary-rgb);
          --border: #2D364B;
          --divider: #1F2840;
          --surface-top: #050D1F;
          --surface-bottom: var(--surface-base);
          --card-top: #0B1935;
          --card-bottom: #0A162E;
          --surface-card-soft-96: #162442;
          --surface-card-soft-86: #2E3B56;
          --wash1: rgba(var(--accent-warm-rgb), 0.22);
          --wash2: rgba(var(--primary-rgb), 0.18);
          --wash3: rgba(var(--accent-rare-rgb), 0.16);

          --glass-surface: rgba(var(--surface-card-rgb), 0.60);
          --glass-surface-strong: rgba(var(--surface-card-rgb), 0.86);
          --glass-tint: rgba(var(--primary-rgb), 0.18);
          --glass-stroke: rgba(255,255,255,0.18);
          --glass-stroke-strong: rgba(255,255,255,0.28);
          --glass-sheen: rgba(255,255,255,0.18);
          --glass-sheen-strong: rgba(255,255,255,0.35);
          --glass-shadow: 0 16px 32px rgba(0,0,0,.45);
          --glass-shadow-hover: 0 22px 44px rgba(0,0,0,.55);
          --glass-shadow-press: 0 12px 24px rgba(0,0,0,.42);
          --glass-inner: inset 0 1px 0 rgba(255,255,255,.08);

          --ink-amber: #F5A621;
          --ink-lime: #BCC955;
          --ink-teal: #26827A;
          --ink-cyan: #6FADF8;
          --ink-lavender: #A486F6;

          --moon-core: #1F273A;
        }
      }
    }

    /* Progressive enhancement for outlines */
    @supports (color: color-mix(in srgb, black, white)) {
      :root{
        --focus-outline: color-mix(in srgb, var(--accent) 70%, transparent);
        --focus-outline-strong: color-mix(in srgb, var(--accent), white 20%);
      }
    }

    /* ============================================================
       2) Base / Resets
       ============================================================ */
    @layer base {
      *{ box-sizing:border-box; }

      html{ scroll-behavior:smooth; }

      body{
        min-height: 100vh;
        width: 100%;
        margin:0;
        padding:0;
        overflow-x: hidden;
        font: var(--type-body)/var(--lh-body) system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        font-weight: var(--fw-body);
        color: var(--text);

        /* Warm sand + color washes */
        background:
          radial-gradient(1100px 640px at 18% 0%, var(--wash1), transparent 60%),
          radial-gradient(1200px 720px at 88% 10%, var(--wash2), transparent 58%),
          radial-gradient(950px  640px at 50% 100%, var(--wash3), transparent 55%),
          linear-gradient(180deg, var(--surface-top), var(--surface-bottom));
      }

      /* Keep html solid for overscroll; let body keep the layered washes */
      html{
        background: var(--surface-base);
        color: var(--text);
        width: 100%;
        overflow-x: hidden;
      }

      @supports (overflow: clip){
        html, body{ overflow-x: clip; }
      }

      /* Global small body copy style */
    .fine{
      font-size: var(--type-body);
      line-height: var(--lh-body);
      color: var(--text-muted);
    }
      .no-italic{ font-style: normal; }

      a{
        color: var(--link);
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
      }

      /* ============================================================
         Global focus styles (keyboard-first, calm, consistent)
         ============================================================ */
      :focus{ outline:none; }

      :focus-visible{
        outline: 3px solid var(--focus-outline);
        outline-offset: 3px;
        border-radius: calc(var(--radius-md) + 2px);
      }

      /* For links specifically (so focus isn’t lost on inline text) */
      a:focus-visible{
        text-decoration: underline;
        text-underline-offset: 3px;
      }

.wrap{ max-width:var(--max); margin:0 auto; padding:0 var(--gutter); }

      /* Background texture + subtle animated color drift */
      body::before{
        content:"";
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        opacity: .14;
        mix-blend-mode: multiply;

        /* Micro-grain using repeating lines (no external assets) */
        background:
          repeating-linear-gradient(0deg,
            rgba(17,20,24,.030) 0px,
            rgba(17,20,24,.030) 1px,
            transparent 1px,
            transparent 3px),
          repeating-linear-gradient(90deg,
            rgba(17,20,24,.018) 0px,
            rgba(17,20,24,.018) 1px,
            transparent 1px,
            transparent 4px);
      }

      body::after{
        content:"";
        position: fixed;
        inset: -10%;
        pointer-events:none;
        z-index: 0;
        opacity: .28;
        mix-blend-mode: screen;
        filter: blur(70px) saturate(125%);
        background:
          radial-gradient(900px 600px at 20% 15%, rgba(var(--accent-warm-rgb), 0.35), transparent 62%),
          radial-gradient(1000px 700px at 80% 20%, rgba(var(--primary-rgb), 0.30), transparent 64%),
          radial-gradient(900px 700px at 55% 85%, rgba(var(--accent-rare-rgb), 0.26), transparent 62%);
        animation: lavaDrift 22s ease-in-out infinite alternate;
        transform: translate3d(0,0,0);
      }

      @keyframes lavaDrift{
        0%{ transform: translate3d(-1.5%, -1%, 0) scale(1); }
        50%{ transform: translate3d(1%, 0.5%, 0) scale(1.02); }
        100%{ transform: translate3d(2%, 1.5%, 0) scale(1.04); }
      }

      .nav, main, footer{ position:relative; z-index:1; }
    }

    /* ============================================================
       3) Components
       ============================================================ */
    @layer components {
    .skip-link{
      position: absolute;
      left: 12px;
      top: 12px;
      z-index: 1000;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(var(--surface-card-rgb), 0.92);
      border: 1px solid var(--border);
      color: var(--text);
      text-decoration: none;
      box-shadow: var(--shadow);
      transform: translateY(-160%);
      transition: transform .18s ease;
    }

    .skip-link:focus{
      transform: translateY(0);
    }
    .nav{
      position: sticky;
      top: 0;
      margin-top: 0;
      z-index: 50;
      width: 100%;
      background: rgba(var(--surface-card-rgb), 0.82);
      -webkit-backdrop-filter: saturate(180%) blur(10px);
      backdrop-filter: saturate(180%) blur(10px);
      border-bottom: 1px solid var(--divider);
      box-shadow: 0 1px 0 rgba(255,255,255,.4) inset;
      transition: transform .25s ease;
    }
    .nav.nav-hidden{
      transform: translateY(-110%);
    }

    .nav-inner{
      max-width: var(--max);
      width: 100%;
      margin: 0 auto;
      padding: 14px var(--space-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      background: transparent;
      border: 0;
      box-shadow: none;
    }
    .nav-toggle{
      display:none;
      align-items:center;
      justify-content:center;
      width:44px;
      height:44px;
      border-radius:12px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, var(--card-top), var(--card-bottom));
      box-shadow: var(--shadow);
      cursor:pointer;
      font-size: var(--type-body);
      font-weight: var(--fw-body);
      color: rgba(var(--text-rgb), 0.82);
      text-shadow: none;
    }
    .mobile-nav-panel{
      position: fixed;
      inset: 0;
      background: rgba(var(--surface-card-rgb), 0.96);
      -webkit-backdrop-filter: saturate(160%) blur(14px);
      backdrop-filter: saturate(160%) blur(14px);
      padding: 72px var(--gutter) 28px;
      display: none;
      flex-direction: column;
      gap: 12px;
      z-index: 60;
      border-top: 1px solid var(--divider);
      box-shadow: 0 18px 40px rgba(0,0,0,.28);
    }
    .mobile-nav-panel.is-open{
      display: flex;
    }
    .mobile-nav-panel a{
      display: block;
      font-size: var(--type-body);
      font-weight: var(--fw-strong);
      color: rgba(var(--text-rgb), 0.9);
      text-shadow: none;
      text-decoration: none;
      padding: 12px var(--space-sm);
      border-radius: 12px;
      background: rgba(var(--surface-card-rgb), 0.65);
      border: 1px solid rgba(var(--text-rgb), 0.12);
    }
    .mobile-nav-close{
      position: absolute;
      top: 14px;
      right: 18px;
      border: 0;
      background: none;
      font-size: var(--type-body);
      cursor: pointer;
      color: var(--text);
    }
    body.nav-open{
      overflow: hidden;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: var(--space-sm);
      font-weight:700;
      letter-spacing:.2px;
      text-decoration: none;
      color: inherit;
    }

    .brand:hover{ opacity: .92; }

    .brand-logo{
      width: 28px;
      height: 28px;
      flex: 0 0 28px;
    }

    .brand .brand-meta{
      font-weight:500;
      color: var(--text-muted);
      letter-spacing: 0;
      font-size: var(--type-meta);
      display: inline-flex;
      align-items: center;
      gap:8px;
    }

    .brand .brand-meta .brand-sep{
      opacity:.5;
    }

    .dot{
      width:10px;
      height:10px;
      border-radius:999px;
      background: linear-gradient(135deg,
        var(--primary),
        var(--accent-warm));
      box-shadow: 0 0 0 6px rgba(var(--primary-rgb), 0.18);
    }

    .nav-links{
      display:flex;
      align-items:center;
      gap:14px;
    }

    .nav-links a:not(.btn){
      padding:8px 10px;
      border-radius:12px;
      color: rgba(var(--text-rgb), 0.78);
      font-size: var(--type-body);
      font-weight: var(--fw-body);
      text-shadow: none;
      transition: background .2s ease, color .2s ease, box-shadow .18s ease;
      position:relative; /* needed for underline effect */
      text-decoration: none;
    }
    @media (max-width: 720px){
      .nav-links{ display: none; }
      .nav-toggle{
        display: inline-flex;
        width: 38px;
        height: 38px;
        border-radius: 10px;
      }
      .nav{ padding: 8px 12px; }
      .nav-inner{ gap: var(--space-sm); padding: 10px var(--space-md); }
    }

    @media (max-width: 880px){
      .nav-inner{ gap:12px; }
      .brand{
        flex-wrap: wrap;
        align-items: center;
        gap: 6px;
      }
      .brand-meta{ display:none; }
    }

    .nav-links a:not(.btn):hover{
      background: rgba(var(--text-rgb), 0.08);
      color:var(--text);
      box-shadow: inset 0 -2px 0 rgba(var(--accent-warm-rgb), 0.45);
    }
    .nav-links a:not(.btn):focus-visible{
      background: rgba(var(--text-rgb), 0.10);
      color:var(--text);
      box-shadow: inset 0 -2px 0 rgba(var(--accent-warm-rgb), 0.55);
    }

    /* Underline effect (NAV ONLY) */
    .nav-links a:not(.btn)::after{
      content:"";
      position:absolute;
      left:10px;
      right:10px;
      bottom:6px;
      height:2px;
      border-radius:999px;
      background: rgba(var(--primary-rgb), 0.55);
      transform: scaleX(0);
      transform-origin:left;
      transition: transform .18s ease;
      box-shadow: 0 0 0 1px rgba(var(--surface-card-rgb),0.25);
    }
    .nav-links a:not(.btn):hover::after{ transform: scaleX(1); }
    .nav-links a:not(.btn):focus-visible::after{ transform: scaleX(1); }

    /* ============================================================
       Tap highlight (iOS Safari)
       Remove the blue flash on touch without affecting keyboard focus styles.
       ============================================================ */
    @media (hover: none) and (pointer: coarse){
      /* iOS Safari: prevent the blue tap flash on interactive elements */
      a, button, [role="button"], .schedule-card, .work-stack,
      .work-stack *, .work-stack img{
        -webkit-tap-highlight-color: transparent;
      }

      /* Also prevent the long-press callout/select highlight on the gallery stack images */
      .work-stack,
      .work-stack img{
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }
    }
    /* ============================================================
       5) Buttons
       ============================================================ */
    .btn{
      position: relative;
      overflow: hidden;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:0.7rem 1.1rem;
      border-radius:12px;
      border:1px solid rgba(var(--text-rgb), 0.12);
      background:
        linear-gradient(180deg,
          var(--card-top),
          var(--card-bottom));
      color: var(--text);
      font-size: var(--type-body);
      font-weight: var(--fw-strong);
      text-decoration: none;
      transition: transform .15s ease,
        background .25s ease,
        border-color .25s ease,
        box-shadow .25s ease,
        filter .25s ease;
      will-change: transform;
      box-shadow:
        var(--shadow),
        inset 0 1px 0 rgba(255,255,255,.55);
      text-shadow: none;
    }

    .btn::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius: inherit;
      background:
        radial-gradient(120% 120% at 15% -20%,
          var(--glass-sheen-strong),
          rgba(255,255,255,0) 60%);
      opacity: .55;
      transform: translateX(-6%);
      transition: opacity .25s ease, transform .35s ease;
      pointer-events:none;
    }

    .btn::after{
      content:"";
      position:absolute;
      inset:1px;
      border-radius: inherit;
      border:1px solid rgba(255,255,255,0.6);
      opacity: .75;
    }

    .btn:hover{
      transform: translateY(-1px);
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 48%),
        linear-gradient(180deg,
          var(--card-top),
          var(--card-bottom));
      border-color: rgba(var(--text-rgb), 0.18);
      box-shadow:
        var(--glass-shadow-hover),
        inset 0 1px 0 rgba(255,255,255,.65);
      filter: saturate(1.05);
    }

    .btn:hover::before{
      opacity: .9;
      transform: translateX(0%);
    }

    .btn:active{
      transform: translateY(0px);
      box-shadow:
        var(--glass-shadow-press),
        var(--glass-inner),
        inset 0 -1px 0 rgba(0,0,0,.08);
    }

    .btn:active::before{
      opacity: .55;
      transform: translateX(-4%);
    }

    .ghost{
      border-radius:12px;
      border:1px solid rgba(var(--text-rgb), 0.12);
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 60%),
        linear-gradient(180deg,
          var(--card-top),
          var(--card-bottom));
      color: var(--text);
      text-decoration: none;
      box-shadow:
        0 10px 20px rgba(17,20,24,.08),
        inset 0 1px 0 rgba(255,255,255,.55);
    }

    .ghost:hover{
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 60%),
        linear-gradient(180deg,
          var(--card-top),
          var(--card-bottom));
      border-color: rgba(var(--text-rgb), 0.18);
      box-shadow:
        0 14px 26px rgba(17,20,24,.12),
        inset 0 1px 0 rgba(255,255,255,.65);
    }

    .ghost::before{
      opacity: .45;
    }

    .ghost:hover::before{
      opacity: .65;
    }

    /* ============================================================
       6) Hero
       ============================================================ */
    .wrap > header{
      padding:56px 0 0;
      position: relative;
      margin-bottom: var(--section-gap);
    }

    .kicker{
      display:inline-flex;
      gap: var(--space-sm);
      align-items:center;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(var(--surface-card-rgb), 0.75);
      color: var(--text-muted);
      box-shadow: 0 6px 20px rgba(17,20,24,.05);
    }

    .kicker strong{
      color: var(--text);
    }

    h1{
      margin:18px 0 18px;
      font-size: var(--hero-title-size);
      line-height:1.16;
      letter-spacing:-.6px;
      text-align:center;
    }

    .subhead{
      max-width: min(72ch, 90%);
      font-size: 18px;
      color: var(--text-muted);
      padding: 0 16px;
      margin: calc(var(--hero-title-size) / 3) 0 var(--hero-title-size);
      line-height: 1.65;
      text-align:center;
      margin-left:auto;
      margin-right:auto;
    }

    .hero-actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:14px;
      justify-content:center;
    }

    /* ============================================================
       7) Sections (titles, ledes)
       ============================================================ */
    section{
      padding:0;
      margin: var(--section-gap) 0;
      border-top: 1px solid transparent;
      border-bottom: 1px solid transparent;
    }
    section:first-of-type{
      margin-top: 0;
      border-top: 0;
    }

    .ticker-section,
    .fortune-section{
      position: relative;
    }

    #work{
      padding-top: 100px;
      margin-top: 0;
    }

    @media (max-width: var(--bp-md)){
      #work{
        padding-top: 60px;
      }
    }

    .section-title{
      margin:0 0 8px;
      font-size: var(--type-h2);
      line-height: 1.05;
      letter-spacing:-.3px;
      position:relative;
      display:inline-block;
      --bar-scale: 1;
    }

    /* Small “brand bar” under section titles */
    .section-title::after{
      content:"";
      display:block;
      height:3px;
      margin-top:8px;
      border-radius:999px;
      background: var(--grad-underline);
      opacity:.55;
      width: 100%;
      transform-origin: left center;
      transform: scaleX(var(--bar-scale));
      transition: transform .5s ease;
    }

    .section-lede{
      margin:0 0 16px;
      color: var(--text-muted);
      max-width: min(72ch, 92%);
      line-height: 1.65;
      text-align: left;
    }

    /* ============================================================
       Testimonials
       ============================================================ */
    .testimonials{
      margin-top:28px;
    }

    .testimonials-title{
      margin:0 0 10px;
      color: var(--text-muted);
    }

    .approach-card{
      margin-top:24px;
    }

    #approach .callout + .callout{
      margin-top:24px;
    }

    .testimonial-grid{
      list-style:none;
      margin:0;
      padding:0;
      display:grid;
      gap:var(--space-lg);
    }

    .testimonial-card{
      margin:0;
      padding:0;
      height:100%;
    }

    .quote-figure{
      margin: 0;
      display: grid;
      grid-template-rows: 1fr auto auto;
      row-gap: 0;
      align-items: stretch;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, var(--card-top), var(--card-bottom));
      box-shadow: var(--shadow);
      padding: var(--space-lg);
      position: relative;
      overflow: hidden;
      height: 100%;
    }

    .quote-figure::before{
      content:"";
      position:absolute;
      left:0; top:0; right:0;
      height: var(--bar-height);
      border-radius: inherit;
      background: var(--bar-colors, linear-gradient(90deg,
        rgba(var(--accent-warm-rgb), 0.65) 0%,
        rgba(var(--primary-rgb),     0.65) 33%,
        rgba(var(--accent-rare-rgb), 0.65) 66%,
        rgba(var(--accent-warm-rgb), 0.65) 100%));
      background-size: var(--bar-stripe-size);
      animation: glowBar var(--bar-speed-base) linear infinite;
      opacity: 1;
      pointer-events: none;
    }

    .quote-top{
      display: grid;
      grid-template-columns: 40px 1fr 40px;
      align-items: center;
      min-width: 0;
    }

    .quote-text{
      margin: 12px;
      text-align: left;
      font-style: italic;
      color: var(--text);
      line-height: 1.55;
    }

    .quote-divider{
      height: 1px;
      background: var(--divider);
      width: calc(100% - 24px);
      margin: 24px auto;
    }

    .quote-cite{
      margin: 0;
      color: var(--text-muted);
      display: grid;
      row-gap: 2px;
      text-align: center;
      font-style: italic;
    }

    .quote-cite strong{
      color: var(--text);
      font-weight: 700;
      font-style: normal;
      margin-bottom: 2px;
      display: block;
    }

    .quote-cite h4{
      margin: 0;
      font-size: var(--type-body);
      font-weight: inherit;
      font-style: italic;
      color: var(--text-muted);
    }

    .quote-mark{
      font-weight: 800;
      font-size: clamp(42px, 6vw, 68px);
      line-height: 1;
      opacity: .45;
      -webkit-user-select: none;
      user-select: none;
    }

    .quote-mark--open{
      align-self: start;
      justify-self: start;
    }

    .quote-mark--close{
      align-self: end;
      justify-self: end;
      transform: translateY(20px);
    }

    .quote-teal .quote-mark{ color: var(--ink-teal); }
    .quote-amber .quote-mark{ color: var(--ink-amber); }
    .quote-purple .quote-mark{ color: var(--ink-lavender); }

    @media (max-width: 520px){
      .quote-figure{ padding: var(--space-md); }
      .quote-top{ grid-template-columns: 32px 1fr 32px; }
      .quote-mark{
        font-size: 36px;
        opacity: .42;
      }
    }

    .quote-highlight{
      --hl-color: rgba(var(--accent-warm-rgb), 0.22);
      padding:2px 6px;
      border-radius:6px;
      background: var(--hl-color);
      -webkit-box-decoration-break: clone;
      box-decoration-break: clone;
    }

    .quote-highlight--blue{ --hl-color: rgba(var(--primary-rgb), 0.20); }
    .quote-highlight--amber{ --hl-color: rgba(var(--accent-warm-rgb), 0.24); }
    .quote-highlight--teal{ --hl-color: rgba(var(--accent-rare-rgb), 0.20); }

    /* Bio highlights: human marker feel + staggered reveal */
    .hl{
      position: relative;
      display: inline;
      padding: 0 .06em;
      z-index: 0;
      white-space: normal;
      line-height: 1.2;
      -webkit-box-decoration-break: clone;
      box-decoration-break: clone;
    }

    .hl::before{
      content:"";
      position:absolute;
      left:-.08em;
      right:-.08em;
      top: 55%;
      height: 1.05em;
      transform: translateY(-50%) rotate(var(--hl-angle, -0.4deg));
      transform-origin: left center;
      z-index: -1;
      border-radius: 10px;
      background:
        radial-gradient(16px 10px at 4% 55%,
          rgba(var(--hl-rgb), .55),
          rgba(var(--hl-rgb), 0) 70%),
        radial-gradient(18px 12px at 96% 60%,
          rgba(var(--hl-rgb), .50),
          rgba(var(--hl-rgb), 0) 72%),
        repeating-linear-gradient(0deg,
          rgba(255,255,255,.14) 0px,
          rgba(255,255,255,.14) 2px,
          rgba(255,255,255,0) 3px,
          rgba(255,255,255,0) 6px),
        linear-gradient(180deg,
          rgba(var(--hl-rgb), .05) 0%,
          rgba(var(--hl-rgb), .45) 22%,
          rgba(var(--hl-rgb), .38) 78%,
          rgba(var(--hl-rgb), .10) 100%);
      mix-blend-mode: multiply;
      -webkit-mask-image:
        radial-gradient(12px 8px at 10% 25%, #000 60%, transparent 64%),
        radial-gradient(10px 7px at 30% 15%, #000 62%, transparent 66%),
        radial-gradient(12px 9px at 55% 20%, #000 60%, transparent 65%),
        radial-gradient(10px 8px at 75% 30%, #000 62%, transparent 67%),
        radial-gradient(12px 9px at 92% 22%, #000 60%, transparent 65%),
        linear-gradient(#000, #000);
      -webkit-mask-composite: source-over, source-over, source-over, source-over, source-over, destination-in;
      mask-image:
        radial-gradient(12px 8px at 10% 25%, #000 60%, transparent 64%),
        radial-gradient(10px 7px at 30% 15%, #000 62%, transparent 66%),
        radial-gradient(12px 9px at 55% 20%, #000 60%, transparent 65%),
        radial-gradient(10px 8px at 75% 30%, #000 62%, transparent 67%),
        radial-gradient(12px 9px at 92% 22%, #000 60%, transparent 65%),
        linear-gradient(#000, #000);
      mask-composite: add, add, add, add, add, intersect;
      opacity: 0;
      width: 0%;
      transition: none;
    }

    /* Multi-line highlight support (used in testimonials) */
    .hl--multi{
      background:
        radial-gradient(16px 10px at 4% 60%,
          rgba(var(--hl-rgb), .55),
          rgba(var(--hl-rgb), 0) 70%),
        radial-gradient(18px 12px at 96% 60%,
          rgba(var(--hl-rgb), .50),
          rgba(var(--hl-rgb), 0) 72%),
        repeating-linear-gradient(0deg,
          rgba(255,255,255,.14) 0px,
          rgba(255,255,255,.14) 2px,
          rgba(255,255,255,0) 3px,
          rgba(255,255,255,0) 6px),
        linear-gradient(180deg,
          rgba(var(--hl-rgb), .05) 0%,
          rgba(var(--hl-rgb), .45) 22%,
          rgba(var(--hl-rgb), .38) 78%,
          rgba(var(--hl-rgb), .10) 100%);
      background-size: 100% 1.08em;
      background-position: 0 58%;
      background-repeat: repeat-x;
      -webkit-box-decoration-break: clone;
      box-decoration-break: clone;
      white-space: normal;
    }

    .hl--multi::before{ 
      content: none !important;
      display: none !important;}

    .hl.is-on::before{
      opacity: 1;
      width: 100%;
      animation: hl-swipe 900ms cubic-bezier(.2,.9,.2,1) both;
    }

    @keyframes hl-swipe{
      0%{ width: 0%; filter: saturate(1.05); }
      70%{ width: 100%; }
      100%{ width: 100%; filter: saturate(1); }
    }

    /* Mobile: simplify bio highlights to static multi-line style */
    @media (max-width: var(--bp-sm)){
      .bio .hl,
      .bio-highlight{
        padding: 0 .06em;
        white-space: normal;
        background: rgba(var(--hl-rgb, 245,158,11), 0.06); );
        box-shadow: none;
        border-radius: 8px;
        -webkit-box-decoration-break: clone;
        box-decoration-break: clone;
        font-weight: 600;
        animation: none;
      }
      .bio .hl::before,
      .bio .hl.is-on::before,
      .bio-highlight::before,
      .bio-highlight.is-on::before{
        content:none !important; 
        display:none !important; 
      }

    }

    .hl-amber{ --hl-rgb: 245, 158, 11; }
    .hl-blue{ --hl-rgb: 37, 99, 235; }
    .hl-teal{ --hl-rgb: 15, 118, 110; }
    .hl-purple{ --hl-rgb: 155, 122, 247; }
    .hl-green{ --hl-rgb: 181, 196, 68; }

    /* Bio highlights: multi-line safe; animated fill on tablet/desktop */
    .bio .hl,
    .bio-highlight{
      position: relative;
      padding: 0 .08em;
      --hl-fill: linear-gradient(180deg,
          rgba(var(--hl-rgb, 245,158,11), .05) 0%,
          rgba(var(--hl-rgb, 245,158,11), .45) 22%,
          rgba(var(--hl-rgb, 245,158,11), .38) 78%,
          rgba(var(--hl-rgb, 245,158,11), .10) 100%);
      --hl-texture:
        radial-gradient(16px 10px at 4% 60%,
          rgba(var(--hl-rgb, 245,158,11), .55),
          rgba(var(--hl-rgb, 245,158,11), 0) 70%),
        radial-gradient(18px 12px at 96% 60%,
          rgba(var(--hl-rgb, 245,158,11), .50),
          rgba(var(--hl-rgb, 245,158,11), 0) 72%),
        repeating-linear-gradient(0deg,
          rgba(255,255,255,.14) 0px,
          rgba(255,255,255,.14) 2px,
          rgba(255,255,255,0) 3px,
          rgba(255,255,255,0) 6px);
      background:
        var(--hl-fill),
        var(--hl-texture);
      background-size:
        0% 100%,
        100% 100%;
      background-position: 0 58%, 0 58%;
      background-repeat: no-repeat, repeat;
      border-radius: 8px;
      -webkit-box-decoration-break: clone;
      box-decoration-break: clone;
      font-weight: inherit;
      box-shadow: none
      animation: none;
    }

    .bio .hl.is-on,
    .bio-highlight.is-on{
      animation: hl-fill 1080ms cubic-bezier(.2,.9,.2,1) forwards;
      background-size:
        100% 100%,
        100% 100%;
    }

    @keyframes hl-fill{
      0%{ background-size: 0% 100%; filter: saturate(1.05); }
      70%{ background-size: 100% 100%; }
      100%{ background-size: 100% 100%; filter: saturate(1); }
    }

    .bio .hl::before,
    .bio .hl.is-on::before,
    .bio-highlight::before,
    .bio-highlight.is-on::before{ content: none !important; }

    .hl.a1{ --hl-angle:-0.6deg; }
    .hl.a2{ --hl-angle:-1deg; }
    .hl.a3{ --hl-angle: 0.4deg; }
    .hl.a4{ --hl-angle: 0.8deg; }
    .hl.a5{ --hl-angle:-0.3deg; }

    @media (min-width: 840px){
      .testimonial-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    /* ============================================================
       8) Shared Card / Callout Surface
       ============================================================ */
    .surface{
      position:relative;
      overflow:hidden;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-card);

      background: linear-gradient(180deg,
        var(--card-top),
        var(--card-bottom));
      transition: transform .18s ease,
        box-shadow .2s ease,
        border-color .2s ease,
        background .2s ease;
    }
    /* Some cards (like the Work screenshot stack) need to let rotated images hang outside the card. */
    .surface.stack-card{
      overflow: hidden;
    }

    .surface::before{
      content:"";
      position:absolute;
      left:0; top:0; right:0;
      height: var(--bar-height);
      border-radius: inherit;
      --bar-colors: linear-gradient(90deg,
        rgba(var(--accent-warm-rgb), 0.65) 0%,
        rgba(var(--primary-rgb),     0.65) 33%,
        rgba(var(--accent-rare-rgb), 0.65) 66%,
        rgba(var(--accent-warm-rgb), 0.65) 100%
      );
      background: var(--bar-colors);
      z-index: 4;
      background-size: var(--bar-stripe-size);
      animation: glowBar var(--bar-speed, var(--bar-speed-base)) linear infinite;
      opacity: 1;
      pointer-events: none;
    }
    .surface > *{
      position: relative;
      z-index: 1;
    }

    /* Slight per-card variation: direction + tempo */
    .surface:nth-of-type(even)::before{
      animation-direction: reverse;
    }
    .surface:nth-of-type(3n)::before{
      --bar-speed: var(--bar-speed-alt);
    }

    /* Fine sand grain on light cards */
    .surface::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.16;
      mix-blend-mode: multiply;
      background:
        radial-gradient(1px 1px at 12% 18%, rgba(17,20,24,.10), transparent 60%),
        radial-gradient(1px 1px at 38% 72%, rgba(17,20,24,.08), transparent 60%),
        radial-gradient(1px 1px at 71% 32%, rgba(17,20,24,.08), transparent 60%),
        radial-gradient(1px 1px at 86% 64%, rgba(17,20,24,.06), transparent 60%),
        radial-gradient(1px 1px at 24% 55%, rgba(17,20,24,.08), transparent 60%);
      background-size: 120px 120px;
      z-index: 1;
    }

    /* Keep gradient bars visually on top across all cards */
    .surface::before,
    .schedule-card::after,
    .help-item::before,
    .help-detail::before,
    .quote-figure::before{
      z-index: 9;
    }

    @keyframes glowBar{
      0%{ background-position:   0% 50%; }
      100%{ background-position: 200% 50%; }
    }

    /* Disable hover lift for specific surfaces (e.g., email card). */
    .surface.no-hover:hover{
      transform: none;
      border-color: var(--border);
      box-shadow: var(--shadow);
      background: linear-gradient(180deg, var(--card-top), var(--card-bottom));
    }

    .surface:focus{
      outline:none;
    }

    .surface:focus-visible{
      box-shadow: 0 0 0 4px rgba(var(--focus-ring-rgb), 0.35), var(--shadow);
      border-color: rgba(var(--primary-rgb), 0.35);
    }

    /* Keep brand bars above any inner content (z-index helper) */
    .surface::before,
    .schedule-card::after,
    .help-item::before,
    .help-detail::before,
    .quote-figure::before{
      z-index: 9;
    }

    .card--overlay{ overflow: visible; }

    /* ============================================================
       9) Work Cards Grid + Pills
       ============================================================ */
    /* Work grid scoped so other grids remain unchanged */
    #work .grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-xl);
    }

    /* Two-column inside each work card: 1/3 copy, 2/3 media */
    #work .grid .card{
      padding: 0;
      display: grid;
      grid-template-columns: 1fr 2fr;
      grid-template-areas: "copy media";
      align-items: center;
      overflow: hidden;
      gap: var(--space-lg);
    }

    #work .grid .card .card-copy{
      grid-area: copy;
      min-width: 0;
      padding: var(--space-sm);
    }
    #work .grid .card .card-media{
      grid-area: media;
      width: auto;
      height: 100%;
      display: grid;
      align-items: right;
      position: relative;
      overflow: visible;
      min-height: 260px;
      padding: 6px var(--space-lg) 0 var(--space-lg);
    }

    /* Stack fills its lane */
    #work .grid .card .work-stack{
      width: 100%;
      margin: 0;
    }

    /* Alternate sides on even cards */
    #work .grid .card:nth-child(even){
      grid-template-columns: 2fr 1fr;
      grid-template-areas: "media copy";
    }

    /* Switch to two-row layout at the medium breakpoint */
    @media (max-width: var(--bp-md)){
      #work .grid .card{
        grid-template-columns: 1fr;
        grid-template-areas:
          "copy"
          "media";
        align-items: start;
      }
      #work .grid .card:nth-child(even){
        grid-template-columns: 1fr;
        grid-template-areas:
          "copy"
          "media";
      }
      #work .grid .card .card-copy{
        padding: var(--space-lg);
        min-width: auto;
      }
      #work .grid .card .card-media{
        margin-top: 6px;
        padding: 0;
      }
    }

    /* Cards without media revert to single column */
    #work .grid .card:not(:has(.card-media)){
      grid-template-columns: 1fr;
      grid-template-areas: "copy";
    }

    /* Mobile: stack copy over media */
    @media (max-width: var(--bp-sm)){
      #work .grid .card{
        grid-template-columns: 1fr;
        grid-template-areas:
          "copy"
          "media";
        align-items: start;
      }

      #work .grid .card:nth-child(even){
        grid-template-columns: 1fr;
        grid-template-areas:
          "copy"
          "media";
      }

      #work .grid .card .card-media{
        margin-top: 6px;
      }

      #work .grid .card:not(:has(.card-media)){
        grid-template-columns: 1fr;
        grid-template-areas: "copy";
      }
    }

    .card h3{
      margin:0;
      font-size: var(--type-h3);
    }

    /* Labels like “Role:”, “Scope:”, “Outcome:”
       Keep them consistent across lines. */
    .meta strong,
    .fine strong,
    .win strong{
      color: var(--text);
      font-weight: 700;
      letter-spacing: 0;
      font-style: normal;
    }

    /* Card body copy: unify sizes so the Work cards don’t feel like mixed type styles */
    .card p{
      margin: 0;
      font-size: var(--type-body);
      line-height: var(--lh-body);
    }

    .work-embed{
      position: relative;
      border-radius: var(--radius-md);
      overflow: hidden;
      background: linear-gradient(180deg, var(--card-top), var(--card-bottom));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.4);
    }
    .work-embed iframe{
      width: 100%;
      height: auto;
      aspect-ratio: 16 / 9;
      border: 0;
      display: block;
    }
    .work-embed .embed-poster{
      display: none;
      position: relative;
      text-decoration: none;
      color: inherit;
      background: radial-gradient(120% 120% at 30% 20%, rgba(var(--primary-rgb),0.14), transparent 60%),
                  radial-gradient(120% 120% at 70% 80%, rgba(var(--accent-warm-rgb),0.12), transparent 62%),
                  linear-gradient(180deg, var(--card-top), var(--card-bottom));
      min-height: 180px;
      align-items: center;
      justify-content: center;
    }
    .work-embed .embed-poster img{
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }
    .work-embed .embed-pill{
      position: absolute;
      right: 10px;
      bottom: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(var(--surface-card-rgb), 0.92);
      border: 1px solid rgba(var(--text-rgb), 0.14);
      box-shadow: var(--shadow);
      font-size: var(--type-meta);
      font-weight: 700;
      letter-spacing: 0.1px;
      color: var(--text);
    }

    /* Stacked gallery “on the desk” look */
    .work-stack{
      /*
        Responsive sizing rules:
        - In-card: fill the card width, but never exceed --stack-max.
        - Stack sizing is controlled by the stage element, not by the viewport.
      */
      position: relative;
      width: min(100%, var(--stack-max));
      margin: 12px auto 0;
      display: grid;
      place-items: center;
      cursor: pointer;
      outline: none;
      overflow: visible;
      z-index: 1;

      transition: opacity .35s ease, transform .45s cubic-bezier(.4,-0.2,.2,1);

      /* Stage ratio token (default): 16" MacBook Pro screenshot ratio (3456×2234 = 1728×1117) */
      --stack-ratio: 1728 / 1117;

      /* Overlay sizing tokens (safe defaults; can be overridden per-stack) */
      --stack-overlay-max: 1100px;
      --stack-overlay-gutter: clamp(14px, 4vw, 28px);
    }

    /* Modifier: make a stack never exceed its container/card width */
    .work-stack--fit{
      --stack-max: 100%;
    }
    .work-stack-stage{
      position: relative;

      /*
        Establish a real, stable box for the absolutely-positioned images.
        This prevents “mystery” sizing at iPad landscape widths and reduces
        Safari orientation/layout jitter.
      */
      width: 100%;
      aspect-ratio: var(--stack-ratio, 1728 / 1117);
      min-height: 0;

      /* Allow rotated screenshots to extend past the stage box (keeps the “stack” look). */
      overflow: visible;

      /* Stage rounding is only for visual reference; images have their own rounding */
      border-radius: 10px;

      /* Shadow belongs to the stage so it stays consistent across images */
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.10)) drop-shadow(0 2px 5px rgba(0,0,0,.05));
    }
    .work-stack.is-overlay{
      /* Overlay mode: the wrapper fills the viewport; the stage gets the size */
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      width: 100vw;
      height: 100vh;
      max-width: none;
      margin: 0;
      overflow: visible;
      z-index: 120;
      background: transparent;
    }
    @supports (height: 100dvh){
      .work-stack.is-overlay{
        width: 100dvw;
        height: 100dvh;
      }
    }
    .work-stack.is-overlay .work-stack-stage{
      /*
        Overlay mode: size the stage to the viewport minus a gutter.
        This avoids hard caps like 92vw that can behave oddly on small screens.
      */
      width: min(calc(100vw - (2 * var(--stack-overlay-gutter))), var(--stack-overlay-max));
      aspect-ratio: var(--stack-ratio, 1728 / 1117);
      min-height: min(640px, calc(100vh - (2 * var(--stack-overlay-gutter))));
    }
    @supports (width: 100dvw){
      .work-stack.is-overlay .work-stack-stage{
        width: min(calc(100dvw - (2 * var(--stack-overlay-gutter))), var(--stack-overlay-max));
      }
    }

    @supports (height: 100dvh){
      .work-stack.is-overlay .work-stack-stage{
        min-height: min(640px, calc(100dvh - (2 * var(--stack-overlay-gutter))));
      }
    }
    .work-stack.is-overlay .work-stack-stage img{
      border-radius: 9px;
      box-shadow:
        0 16px 40px rgba(0,0,0,.18),
        0 6px 14px rgba(0,0,0,.12);
      filter: none;
    }
    .work-stack.is-collapsed{
      opacity: 0;
      transform: translateY(12px) scale(1);
      pointer-events: none;
    }
    .work-stack-stage img{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border-radius: 3px;
      box-shadow:
        0px 1px 2px 0px rgba(60, 64, 67, 0.30),
        0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      border: 1px solid rgba(var(--text-rgb), 0.06);
      background: transparent;
      object-fit: contain !important;
      transition: transform .28s ease, box-shadow .28s ease;
      transform-origin: center;
      transform: rotate(var(--rot, 0deg)) scale(var(--scale, 1));
      z-index: var(--z, 1);
    }
    .work-stack-stage img.is-top{
      --scale: 1;
      box-shadow:
        0px 1px 2px 0px rgba(60, 64, 67, 0.30),
        0px 1px 3px 1px rgba(60, 64, 67, 0.15);
    }
    .work-stack-stage img:focus-visible{
      outline: 3px solid rgba(var(--focus-ring-rgb), 0.45);
      outline-offset: 4px;
    }
    @media (max-width: var(--bp-sm)){
      .work-stack{
        /* Mobile: same sizing logic (fill available width), just relax margins */
        width:100%;
      max-width: var(--stack-max) !important;
      margin: 12px auto 0;
      display: grid;
      place-items: center;
      object-fit: contain !important;
    }
      .work-stack-stage{
        min-height: 240px;
      }
    .work-stack-stage img{
      width: 100%;
      height: 100%;
      object-fit: contain !important;
        position: absolute;
        inset: 0;
        transform: rotate(var(--rot, 0deg)) scale(var(--scale, 1));
        transform-origin: center;
        box-shadow:
          0 8px 22px rgba(0,0,0,.18),
          0 2px 6px rgba(0,0,0,.12);
      }
      /* Overlay stack on mobile: keep the stage comfortably inside the viewport */
      .work-stack.is-overlay .work-stack-stage{
        width: min(calc(100vw - (2 * var(--stack-overlay-gutter))), var(--stack-overlay-max));
      }
    }

    /* Mosaic preview for work cards */
    .work-mosaic{
      position: absolute;
      inset: 0;
      overflow: visible;
      pointer-events: auto; /* allow clicking thumbs for spotlight */
      border-radius: 12px;
      isolation: isolate;
      touch-action: manipulation;
    }
    .work-mosaic__tiles{
      position: absolute;
      overflow: visible;
      inset: 0;
      width: 100%;
      height: 100%;
      /* column width scales with the card width but stays within sensible bounds */
      --mosaic-col: clamp(90px, 12vw, 150px);
      display: grid;
grid-auto-flow: column;
      grid-auto-columns: minmax(var(--mosaic-col), 1fr);
      gap: var(--space-sm);
      padding: 18px;
      transform: translate3d(0,0,0);
      opacity: 1;
      z-index: 1;
    }
    .card .work-mosaic{
      position: static;
      width: 100%;
    }
    .work-mosaic__tiles::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), rgba(255,255,255,.15));
      pointer-events:none;
      z-index: 2;
    }
    .work-mosaic__tiles img{
      width: 100%;
      height: auto;
      display: block;
      object-fit: contain;
      border-radius: 5px;
      border: 2px solid rgba(var(--text-rgb), 0.08);
      cursor: pointer;
      transition: transform .25s ease, box-shadow .25s ease, filter .25s ease;
      box-shadow: 0 8px 18px rgba(0,0,0,.12);
    }
    .work-mosaic__tiles img:hover{
      transform: scale(1.05);
      box-shadow:
        0 14px 32px rgba(var(--accent-rare-rgb, 136, 110, 255), 0.26),
        0 4px 12px rgba(0,0,0,.16);
      filter: saturate(1.04);
      overflow: visible;
    }
    .work-mosaic__col{
      position: relative;
      overflow: visible; /* let per-image glows breathe across the gaps */
      z-index: 1;
    }
    .work-mosaic__loop{
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      will-change: transform;
      transform: translateZ(0);
      animation-duration: 120s;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes driftUp{ from{transform:translateY(0);} to{transform:translateY(-50%);} }
    @keyframes driftDown{ from{transform:translateY(-50%);} to{transform:translateY(0);} }
    .work-mosaic__col.col-a .work-mosaic__loop{ animation-name: driftUp; animation-duration: 120s; animation-delay: -30s; }
    .work-mosaic__col.col-b .work-mosaic__loop{ animation-name: driftDown; animation-duration: 360s; animation-delay: -90s; }
    .work-mosaic__col.col-c .work-mosaic__loop{ animation-name: driftUp; animation-duration: 165s; animation-delay: -60s; }
    @media (prefers-reduced-motion: reduce){
      .work-mosaic__loop{ animation: none; }
    }
    /* Hide mosaic on small screens to avoid overflow and dead space */
    @media (max-width: 640px){
      .work-mosaic{ display: none; }
      #work .grid .card{
        grid-template-columns: 1fr;
        grid-template-areas: "copy";
      }
      #work .grid .card .card-media{ display: none; }
      .work-see-more{ margin-top: var(--space-sm); }
      .work-see-more--copy{ display: inline-flex; }
    }
    /* Spotlight overlay when a thumb is clicked */
    .overlay-backdrop,
    .work-mosaic-overlay,
    .brand-overlay{
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      z-index: 160;
      background: rgba(0,0,0,0.24);
      -webkit-backdrop-filter: blur(10px) saturate(1.02);
      backdrop-filter: blur(10px) saturate(1.02);
      opacity: 0;
      transition: opacity .22s ease;
      padding: clamp(14px, 4vw, 26px);
    }
    .overlay-backdrop.is-open,
    .work-mosaic-overlay.is-open,
    .brand-overlay.is-open{
      display: grid;
      opacity: 1;
    }
    /* Unified overlay shell */
    .overlay-frame,
    .work-mosaic-modal,
    .shot-overlay-frame,
    .brand-overlay__frame{
      position: relative;
      width: min(var(--overlay-width), calc(100vw - 24px));
      height: min(var(--overlay-height), calc(100vh - 24px));
      background: #ffffff;
      border-radius: var(--overlay-radius);
      display: grid;
      grid-template-rows: auto 1fr;
      overflow: hidden;
      isolation: isolate;
      box-shadow: var(--shadow-overlay);
    }
    .overlay-frame::before,
    .work-mosaic-modal::before,
    .shot-overlay-frame::before,
    .brand-overlay__frame::before{
      content:"";
      position:absolute;
      inset:0;
      background: conic-gradient(
        from 0deg,
        rgba(var(--accent-rare-rgb,136,110,255),0.55),
        rgba(var(--primary-rgb,24,92,255),0.35),
        rgba(255,255,255,0.35),
        rgba(var(--accent-rare-rgb,136,110,255),0.55)
      );
      filter: blur(8px);
      z-index: 0;
      opacity: 0.7;
      pointer-events: none;
    }
    .overlay-frame::after,
    .work-mosaic-modal::after,
    .shot-overlay-frame::after,
    .brand-overlay__frame::after{
      content:"";
      position:absolute;
      inset:0;
      background: #ffffff,rgba(var(--primary-rgb), 0.25);
      border-radius: var(--overlay-radius);
      z-index: 1;
      pointer-events: none;
    }

    /* Fallback when backdrop-filter is unsupported */
    @supports not ((-webkit-backdrop-filter: blur(10px)) or (backdrop-filter: blur(10px))){
      .overlay-backdrop,
      .work-mosaic-overlay,
      .brand-overlay{
        background: rgba(0,0,0,0.48);
      }

      .overlay-frame,
      .work-mosaic-modal,
      .shot-overlay-frame,
      .brand-overlay__frame{
        background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(245,245,245,0.94));
      }
    }
    .overlay-chrome,
    .work-mosaic-modal__head,
    .shot-overlay-chrome,
    .brand-overlay__head{
      position: relative;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--overlay-gap);
      padding: var(--overlay-pad-y) var(--overlay-pad-x);
      background: rgba(var(--primary-rgb,24,92,255),0.06);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .overlay-title,
    .work-mosaic-title,
    .shot-overlay-title,
    .brand-overlay__title{
      margin: 0;
      font-weight: 700;
      font-size: var(--type-h3, 22px);
      line-height: 1.2;
      color: var(--text, #1e1e1e);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .overlay-actions,
    .brand-overlay__actions{
      display: inline-flex;
      align-items: center;
      gap: var(--overlay-gap);
    }
    .overlay-actions .btn,
    .brand-overlay__actions .btn{
      padding: 10px 14px;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .overlay-nav,
    .work-mosaic-nav,
    .shot-overlay-nav{
      width: 44px;
      height: 44px;
      padding: 0;
      border: none;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      box-shadow:
        0 10px 24px rgba(0,0,0,0.18),
        0 0 0 1px rgba(0,0,0,0.08);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      min-height: 44px;
    }
    .overlay-nav[disabled],
    .work-mosaic-nav[disabled],
    .shot-overlay-nav[disabled]{
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }
    .overlay-nav svg,
    .work-mosaic-nav svg,
    .shot-overlay-nav svg{
      width: 16px;
      height: 16px;
      fill: currentColor;
      color: rgba(30,30,30,0.9);
    }
    .overlay-body,
    .work-mosaic-overlay__figure,
    .shot-overlay-figure,
    .brand-overlay__body{
      position: relative;
      z-index: 2;
      overflow: auto;
      display: grid;
      grid-template-rows: 1fr;
    }
    .gallery-viewport,
    .work-mosaic-overlay__figure,
    .shot-overlay-figure{
      width: 100%;
      height: 100%;
      display: grid;
      place-items: center;
      padding: var(--overlay-pad-x);
      box-sizing: border-box;
    }
    .gallery-viewport img,
    .work-mosaic-overlay__figure img,
    .shot-overlay-figure img{
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      object-position: center;
    }
    .overlay-body iframe{
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }
    .schedule-overlay__frame{
      max-width: var(--overlay-width);
      max-height: var(--overlay-height);
    }
    .schedule-overlay__body{
      background: var(--surface-card);
      padding: clamp(12px, 3vw, 18px);
    }
    #scheduleOverlayFrame{
      display: block;
      width: 100%;
      height: 100%;
      border: 0;
      max-width: 100%;
    }
    .work-see-more{
      position: static;
      display: inline-flex;
      pointer-events: auto;
      transition: none;
      margin-top: var(--space-sm);
    }
    .stack-dismiss{
      position: absolute;
      left: calc(100% + 10px);
      bottom: calc(100% + 10px);
      padding: 8px 14px;
      border-radius: 12px;
      opacity: 0;
      pointer-events: none;
      transform: scale(.94);
      transition: opacity .18s ease, transform .18s ease;
      animation: wiggle 2.6s ease-in-out infinite;
      animation-play-state: paused;
      z-index: 130;
      white-space: nowrap;
    }
    .stack-dismiss:focus-visible{
      outline: 3px solid rgba(var(--focus-ring-rgb),0.45);
      outline-offset: 2px;
    }
    .work-stack.is-overlay .stack-dismiss{
      left: 50%;
      top: 50%;
      bottom: auto;
      opacity: 0;
      pointer-events: none;
      transform: translate(-50%, -50%) scale(1);
      animation-play-state: paused;
    }
    .work-stack.is-overlay.is-final .stack-dismiss{
      opacity: 1;
      pointer-events: auto;
      animation-play-state: running;
    }

    /* Reduce tap highlight / selection on touch devices for stacks */
    @media (hover: none) and (pointer: coarse){
      .shot-stack,
      .shot-stack *,
      .shot-stack img,
      .work-stack,
      .work-stack *,
      .work-stack img{
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }
    }

    /* Screenshot Stack */
    .shot-stack{
      position: relative;
      width: auto;
      min-width: 220px;
      max-width: 420px;
      height: clamp(180px, 26vw, 280px);
      margin: 10px auto;
      overflow: visible;
    }
    .shot-card{
      position: absolute;
      top: 50%;
      left: 50%;
      height: 100%;
      width: 100%;
      border-radius: 4px;
      overflow: hidden;
      background: transparent;
      box-shadow:
        0px 1px 2px 0px rgba(60, 64, 67, 0.30),
        0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      transform-origin: 50% 90%;
      transform: translate(-50%, -50%) rotate(var(--rot, 0deg));
    }
    .shot-card img{
      height: 100%;
      width: auto;
      object-fit: contain;
      object-position: center;
      background: transparent;
      display: block;
    }
    .shot-card.is-cap{ 
      z-index: 10; 
      display: none;
    }
    .shot-card.is-cap::after{
      z-index: 1;
      pointer-events: none;
      content:"";
      position:absolute;
      inset:0;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      /* Fade the blur itself toward the edges */
      -webkit-mask-image: radial-gradient(circle at 50% 50%,
        rgba(0,0,0,1) 0%,
        rgba(0,0,0,.7) 33.3%,
        rgba(0,0,0,.1) 66.6%);
      mask-image: radial-gradient(circle at 50% 50%,
        rgba(0,0,0,1) 0%,
        rgba(0,0,0,.7) 33.3%,
        rgba(0,0,0,.1) 66.6%);
      /* Separate soft glow, independent of blur */
      background: radial-gradient(ellipse at 50% 50%,
        rgba(255,255,255,0.60) 0%,
        rgba(255,255,255,0.00) 65%);
    }
    .shot-card.is-cap img{
      position: relative;
      z-index: 0;
      transform: none;
      filter: none;
    }
    .shot-hide{
      position: absolute;
      z-index: 3;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      white-space: nowrap;
      animation: none;
      border: none;
      box-shadow:
        0px 50px 100px -20px rgba(var(--accent-rare-rgb, 204, 166, 94), 0.28),
        0px 30px 60px -30px rgba(var(--accent-rare-rgb, 204, 166, 94), 0.32),
        0 0 0 1px rgba(var(--accent-rare-rgb, 204, 166, 94), 0.08);
    }
    /* keep hide button centered—override default btn hover shifts */
    .shot-hide.btn,
    .shot-hide.btn:hover,
    .shot-hide.btn:focus,
    .shot-hide.btn:active{
      transform: translate(-50%, -50%) scale(1);
    }
    .shot-hide.btn::after{
      border: none;
    }
    .shot-hide.nudge{
      animation: luxe-pulse 1.4s ease-in-out infinite;
      animation-delay: 0s;
    }
    .shot-stack:not(.is-overlay) .shot-card.is-cap{ display: none; }
    .shot-stack.is-overlay:not(.is-final) .shot-card.is-cap{ display: none; }
    .shot-stack.is-overlay.is-final .shot-card.is-cap{ display: block; }
    .shot-stack.is-overlay{
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      width: 100vw;
      height: 100vh;
      padding: clamp(12px, 4vw, 32px);
      box-sizing: border-box;
      z-index: 140;
      background: transparent;
      overflow: hidden;
    }
    @supports (width: 100dvw){
      .shot-stack.is-overlay{
        width: 100dvw;
        height: 100dvh;
      }
    }
    .shot-stack.is-overlay::before{
      content:"";
      position: fixed;
      inset: 0;
      background:
        linear-gradient(135deg, rgba(183, 161, 229, 0.45), rgba(139, 192, 255, 0.35), rgba(141, 233, 202, 0.30)),
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.16), transparent 48%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.10), transparent 46%),
        rgba(12, 14, 20, 0.42);
      -webkit-backdrop-filter: blur(14px) saturate(1.02);
      backdrop-filter: blur(14px) saturate(1.02);
      z-index: -2;
      pointer-events: none;
    }
    .shot-stack.is-overlay::after{
      content:"";
      position: absolute;
      left: 50%;
      top: 50%;
      width: calc(var(--overlay-width, 1200px) + 40px);
      height: calc(var(--overlay-height, 760px) + 40px);
      border-radius: 18px;
      background: linear-gradient(180deg, #ffffff 0%, #f8f8f9 45%, #f4f5f7 100%);
      box-shadow:
        0 32px 90px rgba(0,0,0,0.26),
        0 12px 36px rgba(0,0,0,0.18),
        0 0 0 1px rgba(255,255,255,0.48),
        0 0 0 1px rgba(0,0,0,0.06);
      z-index: -1;
      transform: translateZ(0) translate(-50%, -50%);
      pointer-events: none;
    }
    .shot-stack.is-overlay{
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      width: 100vw;
      height: 100vh;
      padding: clamp(12px, 4vw, 32px);
      box-sizing: border-box;
      z-index: 140;
      background: transparent;
      overflow: hidden;
    }
    .shot-stack.is-overlay .shot-card{ display: none; }
    .shot-overlay-frame{
      position: absolute;
      left: 50%;
      top: 50%;
      width: var(--overlay-width, 1200px);
      height: var(--overlay-height, 840px);
      transform: translate(-50%, -50%);
      border-radius: 18px;
      box-shadow:
        0 20px 46px rgba(0,0,0,0.16),
        0 4px 12px rgba(0,0,0,0.10);
      background: #fff;
      isolation: isolate;
      display: grid;
      grid-template-rows: var(--overlay-header, 72px) 1fr;
      overflow: hidden;
      z-index: 150;
      position: relative;
    }
    .shot-overlay-frame::before{
      content:"";
      position:absolute;
      inset:-8px;
      background: conic-gradient(
        from 0deg,
        rgba(var(--accent-rare-rgb,136,110,255),0.55),
        rgba(var(--primary-rgb,24,92,255),0.35),
        rgba(255,255,255,0.35),
        rgba(var(--accent-rare-rgb,136,110,255),0.55)
      );
      filter: blur(8px);
      z-index: 0;
      opacity: 0.7;
      border-radius: inherit;
      pointer-events: none;
    }
    .shot-overlay-frame::after{
      content:"";
      position:absolute;
      inset:0;
      background: #ffffff,rgba(var(--primary-rgb), 0.25);
      border-radius: inherit;
      z-index: 1;
      pointer-events: none;
    }
    .shot-overlay-chrome{
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      background: rgba(255,255,255,0.98);
      border-radius: 18px 18px 0 0;
      box-shadow:
        0 12px 28px rgba(0,0,0,0.16),
        0 0 0 1px rgba(0,0,0,0.06);
      z-index: 200;
      box-sizing: border-box;
    }
    .shot-overlay-figure{
      margin: 0;
      position: relative;
      overflow: hidden;
      background: #f8f8f9;
      display: grid;
      place-items: center;
    }
    .shot-overlay-figure img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }
    .shot-overlay-title{
      position: static;
      padding: 0;
      border-radius: 0;
      background: none;
      color: var(--text, #1e1e1e);
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.1px;
      box-shadow: none;
      z-index: 0;
      margin: 0;
    }
    .shot-overlay-close{
      position: static;
      z-index: 0;
      box-shadow:
        0 10px 22px rgba(0,0,0,0.16),
        0 0 0 1px rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.96);
    }
    .shot-overlay-close.btn:hover,
    .shot-overlay-close.btn:focus-visible{
      transform: translateY(-1px);
    }
    .shot-overlay-nav{
      position: absolute;
      top: 50%;
      width: 44px;
      height: 44px;
      margin: 0;
      padding: 0;
      border: none;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      box-shadow:
        0 14px 32px rgba(0,0,0,0.20),
        0 0 0 1px rgba(0,0,0,0.08);
      display: grid;
      place-items: center;
      transform: translateY(-50%);
      cursor: pointer;
      z-index: 200;
    }
    .shot-overlay-nav svg{
      width: 16px;
      height: 16px;
      fill: currentColor;
      color: rgba(30,30,30,0.9);
    }
    .shot-overlay-nav.is-prev{ left: -26px; }
    .shot-overlay-nav.is-next{ right: -26px; }
    .shot-overlay-nav:hover{
      box-shadow:
        0 18px 40px rgba(0,0,0,0.24),
        0 0 0 1px rgba(var(--accent-rare-rgb,136,110,255),0.32);
    }
    .stack-card{ overflow: visible; }

    @keyframes luxe-pulse{
      0%, 100%{ transform: translate(-50%, -50%) scale(1); box-shadow: none; }
      45%{
        transform: translate(-50%, -50%) scale(1.05);
        box-shadow:
          0 0 0 8px rgba(var(--accent-rare-rgb, 204, 166, 94), 0.18),
          0 10px 30px rgba(0,0,0,.18);
      }
    }
    @keyframes wiggle{
      0%, 90%, 100%{ transform: scale(1) rotate(0deg); }
      94%{ transform: scale(1.02) rotate(2deg); }
      97%{ transform: scale(1.02) rotate(-3deg); }
    }

    /* Case Studies card */
    .case-studies-card{
      margin: var(--space-lg) 0 0;
      padding: clamp(12px, 3vw, 32px);
      display: grid;
      gap: var(--space-xs);
    }
    .case-studies-card h3{
      margin: 0;
      font-size: var(--type-h3);
    }
    .case-grid{
      display: grid;
      gap: var(--space-xl);
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      align-items: stretch;
    }
    .case-item{
      background: linear-gradient(180deg,
        rgba(var(--surface-card-rgb), 1),
        rgba(var(--surface-card-rgb), 0.94));
      border-radius: 14px;
      border: 1px solid rgba(var(--border, #DAD5CE), 0.6);
      box-shadow: 0 14px 36px rgba(0,0,0,0.08);
      padding: var(--space-md);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      height: 100%;
    }
    .case-item h4{
      margin: 0;
      font-size: var(--type-h4, 20px);
      font-weight: 700;
    }
    .case-type{
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: rgba(var(--text-rgb),0.06);
      color: var(--text);
      font-weight: 700;
      font-size: 12px;
      letter-spacing: 0.08px;
      margin-left: var(--space-xs);
    }
    .case-one{
      margin: 4px 0;
      font-size: var(--type-body, 16px);
      line-height: 1.4;
      color: var(--text);
      font-weight: 600;
    }
    .case-meta{
      margin: 0;
      color: var(--text-muted);
      font-size: 14px;
      line-height: 1.35;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .case-chips{
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .case-chips li{
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: rgba(var(--text-rgb),0.05);
      color: var(--text-muted);
      font-size: 12px;
      font-weight: 600;
    }
    .case-outcome{
      margin: 0;
      color: var(--text);
      line-height: 1.45;
      font-weight: 600;
      position: relative;
      z-index: 2;
      margin-bottom: var(--space-2xl, 48px);
    }
    /* Case media: no inner card; ribbons sit behind cover */
    .case-media{
      position: relative;
      margin: -8px auto 0;
      width: 100%;
      max-width: var(--case-media-max);
      border-radius: var(--radius-md);
      background: none;
      box-shadow: none;
      overflow: hidden;
      isolation: isolate;
      padding: 0;
      min-height: clamp(260px, 30vw, 340px);
      aspect-ratio: 16 / 10;
      transition: transform .24s ease;
      cursor: pointer;
      perspective: 1200px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1 1 66%;
    }
    .case-media:hover{
      transform: translateY(-2px);
    }
    @media (max-width: var(--bp-sm)){
      .case-media{ display: none; }
      .case-cta .btn{ padding: 10px 12px; }
    }
    .case-ribbons{
      position:absolute;
      inset: 50% var(--space-sm) var(--space-sm);
      z-index:0;
      display:flex;
      flex-direction:column;
      gap: var(--ribbon-gap);
      opacity:0.32;
      pointer-events:none;
      transform: translateX(-30%) scale(0.65);
      transform-origin: center left;
    }
    @media (max-width: var(--bp-md)){
      .case-ribbons{
        max-height: 220px;
        overflow: hidden;
      }
      .case-ribbon-row{
        height: 160px;
        min-height: 160px;
      }
    }
    .case-ribbon-row{
      display:flex;
      gap: var(--ribbon-gap);
      min-height: calc(var(--cover-height, 280px) * 0.5);
      height: calc(var(--cover-height, 280px) * 0.5);
      animation-duration: var(--ribbon-speed-a);
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      will-change: transform;
    }
    .case-ribbon-row.row-a{ animation-name: caseRibbonLeft; animation-duration: var(--ribbon-speed-a); }
    .case-ribbon-row.row-b{ animation-name: caseRibbonRight; animation-duration: var(--ribbon-speed-b); }
    .case-ribbon-row.row-c{ animation-name: caseRibbonLeft; animation-duration: var(--ribbon-speed-c); }
    .case-ribbon-row img{
      height: calc(var(--cover-height, 280px) * 0.5);
      width:auto;
      border-radius: var(--radius-sm);
      object-fit: contain;
      box-shadow: 0 6px 14px rgba(0,0,0,0.12);
    }
    @keyframes caseRibbonLeft{
      from{ transform: translateX(-25%); }
      to{ transform: translateX(-75%); }
    }
    @keyframes caseRibbonRight{
      from{ transform: translateX(-75%); }
      to{ transform: translateX(-25%); }
    }
    @media (max-width: 900px){
      .case-ribbons{ display: none !important; }
    }
    .case-cta{
      margin-top: auto;
      padding-top: var(--space-md);
      margin-bottom: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      flex-wrap: wrap;
      max-width: var(--case-media-max);
      width: 100%;
      margin-left: auto;
      margin-right: auto;
      justify-content: center;
    }
    .case-cta .fine{
      margin: 0;
      color: var(--text-muted);
    }
    .case-tags{
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: var(--space-sm) 0 0;
    }
    .case-tag{
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: rgba(var(--text-rgb), 0.06);
      color: var(--text-muted);
      font-size: 12px;
      font-weight: 600;
    }
    .case-media:hover{
      transform: translateY(-4px);
      box-shadow:
        0 26px 60px rgba(0,0,0,0.16),
        0 10px 24px rgba(0,0,0,0.08),
        0 0 0 1px rgba(0,0,0,0.06);
    }
    @media (max-width: var(--bp-sm)){
      .case-ribbon__track{
        grid-auto-columns: 120px;
        padding: 14px;
        animation-duration: 160s;
      }
      .case-cover{
        width: 100%;
      }
    }
    @media (prefers-reduced-motion: reduce){
      .case-ribbon-row{
        animation: none;
      }
    }
    .case-stack{
      position: relative;
      height: 200px;
      margin-bottom: var(--space-lg);
    }
    .case-stack img{
      position: absolute;
      width: 70%;
      max-width: 260px;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) rotate(var(--rot, 0deg));
      border-radius: 3px;
      box-shadow:
        0px 1px 2px 0px rgba(60, 64, 67, 0.30),
        0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      border: 1px solid rgba(var(--text-rgb), 0.08);
      background: #fff;
    }
    .case-stack img:nth-child(1){ --rot: -3deg; z-index: 1; }
    .case-stack img:nth-child(2){ --rot: 2deg; z-index: 2; transform: translate(-52%, -52%) rotate(var(--rot)); }
    .case-stack img:nth-child(3){ --rot: -1deg; z-index: 3; transform: translate(-48%, -49%) rotate(var(--rot)); }
    .case-stack img:nth-child(4){ --rot: 1deg; z-index: 4; transform: translate(-50%, -51%) rotate(var(--rot)); }
    .case-stack img:nth-child(5){ --rot: 0deg; z-index: 5; }
    @media (max-width: var(--bp-md)){
      .work-embed iframe{ display: none; }
      .work-embed .embed-poster{ display: flex; }
    }

    /* Unified meta/label line */
    .meta-line{
      margin: 0;
      font-size: var(--type-meta);
      line-height: var(--lh-body);
      color: var(--meta-color);
      font-weight: var(--fw-body);
    }
    .meta-line strong{
      color: var(--text);
      font-weight: var(--fw-strong);
    }

    /* .fine is used elsewhere as “small copy”, but inside cards we want body size */
    .card .fine{
      font-size: var(--type-body);
      line-height: var(--lh-body);
      color: var(--text-muted);
    }

    .proofline{
      margin: 6px 0 0;
    }

    .proofline strong{
      color: var(--text);
      font-weight: 700;
    }

    /* ============================================================
       Ticker Tape (analog paper strip)
       ============================================================ */
    .ticker-bleed{
      width: 100vw;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      min-width: 0;
      height: 50px;
      margin: 0;
      padding: 0;
    }
    .ticker-clip{
      position: relative;
      height: 50px;
      overflow: hidden;
      min-width: 0;
    }
    .ticker-bleed::before{
      content:"";
      position:absolute;
      inset: 6px 0 6px 10px;
      border-top: 1px solid #fff;
      border-bottom: 0;
      background: #fcfcfc;
      box-shadow:
        0 6px 10px -8px rgba(17,20,24,.10);
      pointer-events:none;
      z-index: 1;
    }

    .ticker-label{
      margin: 24px 0 6px;
      margin-left: 24px;
    }

    #tickerTape{
      position: absolute;
      inset: 6px 0 6px 10px;
      z-index: 2;
      border: 0;
      border-radius: 0;
      background: transparent;
      box-shadow: none;
      will-change: transform;
      transform: translate3d(0,0,0);
    }

    .tape-edge{
      display: none;
    }

    .tape-track{
      position: absolute;
      inset: 0;
      display: inline-flex;
      align-items: center;
      gap: 18px;
      padding: 0 22px;
      white-space: nowrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-variant-numeric: tabular-nums;
      font-size: 14px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: rgba(17,20,24,.78);
      --tape-ink: rgba(17,20,24,.78);
      --tape-dot-size: 1.5px;
      --tape-dot-ink: 0.5px;
      --tape-dot-clear: 0.9px;
      text-shadow:
        0.6px 0 rgba(0,0,0,.10),
        -0.6px 0 rgba(0,0,0,.06);
      -webkit-font-smoothing: antialiased;
      -webkit-user-select: none;
      user-select: none;
    }

    .tape-run{
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding-right: var(--space-sm);
    }

    .tape-item{
      display: inline-flex;
      align-items: baseline;
      gap: 6px;
      padding: 0;
    }

    .tape-key{
      font-weight: 800;
      color: rgba(17,20,24,.86);
      --tape-ink: rgba(17,20,24,.86);
    }

    .tape-sep{
      opacity: .55;
    }

    .tape-pipe{
      opacity: .55;
    }

    .tape-val{
      font-style: italic;
      font-weight: 500;
      letter-spacing: .03em;
      opacity: .72;
      text-transform: none;
    }

    .tape-track .tape-key,
    .tape-track .tape-val,
    .tape-track .tape-sep,
    .tape-track .tape-pipe{
      background-image:
        radial-gradient(circle, var(--tape-ink) var(--tape-dot-ink), transparent var(--tape-dot-clear));
      background-size: var(--tape-dot-size) var(--tape-dot-size);
      background-position: 0 0;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      filter: contrast(1.22) saturate(0.92);
      text-shadow: none;
    }


    .ticker-controls-row{
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
    }
    .ticker-controls{
      grid-column: 2;
      display: inline-flex;
      gap: 24px;
      align-items: center;
      justify-content: center;
    }
    .ticker-btn{
      display: inline-flex;
      padding: 0;
      width: 32px;
      height: 32px;
      min-width: 32px;
      max-width: 32px;
      flex: 0 0 32px;
      position: relative;
      border: 0;
      border-radius: 0;
      background: none;
      box-shadow: none;
      overflow: visible;
      font-size: 20px;
      line-height: 1;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      -webkit-backdrop-filter: none;
      backdrop-filter: none;
      transition: transform .22s ease;
    }
    .ticker-btn .speed-label{
      position: absolute;
      top: 50%;
      font-size: var(--type-meta);
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--text-muted);
      white-space: nowrap;
      opacity: 0;
      transform: translateY(-50%) scale(0.98);
      transition: opacity .18s ease, transform .18s ease;
      pointer-events: none;
    }
    .ticker-btn .speed-label--left{
      right: 100%;
      margin-right: 8px;
    }
    .ticker-btn .speed-label--right{
      left: 100%;
      margin-left: 8px;
    }
    .ticker-btn:hover .speed-label,
    .ticker-btn:focus-visible .speed-label{
      opacity: 1;
      transform: translateY(-50%) scale(1);
    }
    .ticker-btn .ticker-icon{
      width: 20px;
      height: 20px;
      stroke: currentColor;
      fill: none;
      stroke-width: 1.6;
      stroke-linecap: round;
      stroke-linejoin: round;
      flex: 0 0 auto;
    }
    .ticker-btn::before,
    .ticker-btn::after{
      content: none;
    }
    .ticker-btn:hover,
    .ticker-btn:active{
      transform: scale(1.1);
      background: none;
      box-shadow: none;
      filter: none;
    }
    .ticker-helper{
      grid-column: 3;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      min-height: 32px;
      justify-self: end;
      text-align: right;
      max-width: 48ch;
      margin-right: 24px;
    }
    @media (max-width: 720px){
      .ticker-controls-row{
        grid-template-columns: 1fr;
        justify-items: center;
        row-gap: 8px;
      }
      .ticker-controls{ grid-column: 1; }
      .ticker-helper{
        grid-column: 1;
        justify-content: center;
        justify-self: center;
        text-align: center;
      }
    }

    @media (prefers-reduced-motion: reduce){
      #tickerTape{ transform: none !important; }
    }

    .ticker-section{
      margin: -60px 0 -60px 0;
      padding: 0;
      border-radius: 0;
      border: 0;
      background: none;
      box-shadow: none;
      overflow: visible;
    }

    /* ============================================================
       10) Callouts (shared spacing)
       ============================================================ */
    .callout{ padding:var(--space-lg); }
    .callout > h3{ margin:0 0 8px; }
    .callout > p{ margin:0; }

    .link-accent{
      color: var(--link);
      text-decoration: underline;
    }

    /* ============================================================
       APPROACH (Process list)
       ============================================================ */
    .process{
      list-style: none;
      margin: 0;
      padding: 0;
      counter-reset: step;
    }

    .process-step{
      counter-increment: step;
      display: grid;
      grid-template-columns: auto 1fr;
      column-gap: var(--step-gap, 18px);
      align-items: start;
      padding: 12px var(--step-gap, 18px) 12px 0;
      border-top: 1px solid var(--divider);
    }

    .process-step:first-child{
      border-top: 0;
      padding-top: 0;
    }

    /* Left column: number badge */
    .process-num{
      width: var(--step-badge, clamp(54px, 6vw, 72px));
      height: var(--step-badge, clamp(54px, 6vw, 72px));
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      align-self: center;
      margin: 0;
      border: 1px solid var(--border);
      background: rgba(var(--text-rgb), 0.06);
    }

    .process-num::before{
      content: counter(step);
      display: block;
      width: 100%;
      text-align: center;
      font-size: clamp(42px, 6vw, 68px);
      font-weight: 800;
      line-height: 1;
      font-variant-numeric: tabular-nums;
      color: rgba(var(--text-rgb), 0.30);
    }

    /* Right column: text stack */
    .process-body{
      min-width: 0;
      display: grid;
      row-gap: 6px; /* controls title-to-body spacing */
    }

    .process-title{
      font-size: var(--type-h3);
      line-height: 1.18;
      letter-spacing: -.2px;
      margin: 0; /* Tight, predictable margins (no surprise whitespace) */
    }

    .process-why{
      color: var(--text-muted);
      margin: 0; /* Tight, predictable margins (no surprise whitespace) */
    }

    .process-out{
      color: var(--text-muted);
      margin: 0; /* Tight, predictable margins (no surprise whitespace) */
    }

    .process-out strong{
      color: var(--text);
      font-weight: 700;
    }

    .process-step:nth-child(1) .process-num{
      background: rgba(var(--hl-amber-rgb), 0.28);
      border-color: rgba(var(--hl-amber-rgb), 0.45);
    }
    .process-step:nth-child(1) .process-num::before{ color: var(--ink-amber); }

    .process-step:nth-child(2) .process-num{
      background: rgba(var(--hl-lavender-rgb), 0.28);
      border-color: rgba(var(--hl-lavender-rgb), 0.45);
    }
    .process-step:nth-child(2) .process-num::before{ color: var(--ink-lavender); }

    .process-step:nth-child(3) .process-num{
      background: rgba(var(--hl-teal-rgb), 0.28);
      border-color: rgba(var(--hl-teal-rgb), 0.45);
    }
    .process-step:nth-child(3) .process-num::before{ color: var(--ink-teal); }

    .process-step:nth-child(4) .process-num{
      background: rgba(var(--hl-cyan-rgb), 0.26);
      border-color: rgba(var(--hl-cyan-rgb), 0.42);
    }
    .process-step:nth-child(4) .process-num::before{ color: var(--ink-cyan); }

    .process-step:nth-child(5) .process-num{
      background: rgba(var(--hl-lime-rgb), 0.28);
      border-color: rgba(var(--hl-lime-rgb), 0.45);
    }
    .process-step:nth-child(5) .process-num::before{ color: var(--ink-lime); }

    /* Small screens */
    @media (max-width: 520px){
      .process-step{
        grid-template-columns: auto 1fr;
        column-gap: var(--step-gap, 12px);
        padding: 10px var(--step-gap, 12px) 10px 0;
      }

      .process-num{
        width: var(--step-badge, clamp(46px, 12vw, 60px));
        height: var(--step-badge, clamp(46px, 12vw, 60px));
        border-radius: 14px;
        margin: 0;
      }

      .process-num::before{
        font-size: clamp(34px, 10vw, 52px);
      }
    }

    /* Narrow screens: number + title on first row; body spans full width below */
    @media (max-width: var(--bp-sm)){
      .process-step{
        display: grid;
        grid-template-columns: 1fr;
        row-gap: 8px;
        column-gap: 0;
      }
      .process-body{
        display: contents;
        row-gap: 0;
      }
      .process-num{
        display: none;
      }
      .process-title{
        margin-top: 0;
      }
      .process-title::before{
        content: counter(step) " ";
        color: var(--ink-amber);
        font-weight: 800;
        margin-right: 8px;
      }
      .process-why{
        margin-top: 0;
      }
      .process-out{
        margin-top: 0;
      }
    }

    /* ============================================================
       11) About Grid
       ============================================================ */
    .about-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:var(--space-lg);
    }

    .about-h3{
      margin:0 0 8px;
      font-size: var(--type-h3);
    }

    /* ============================================================
       12) Help: Master-detail layout (desktop) + accordion (mobile)
       ============================================================ */
    .help-split{
      display:block;
      width: 100%;
    }

    /* Tabs: How I Can Help */
    .help-card{
      --tab-hl-rgb: var(--accent-rare-rgb);
      width: 100%;
      border:1px solid var(--border);
      border-radius: var(--radius-md);
      background: linear-gradient(180deg, var(--card-top), var(--card-bottom));
      box-shadow: var(--shadow);
      padding: var(--space-lg);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      margin: 0;
      position: relative;
      overflow: hidden;
    }

    .help-card::before{
      content:"";
      position:absolute;
      left:0; top:0; right:0;
      height: var(--bar-height);
      border-radius: inherit;
      background: var(--bar-colors, linear-gradient(90deg,
        rgba(var(--accent-warm-rgb), 0.65) 0%,
        rgba(var(--primary-rgb),     0.65) 33%,
        rgba(var(--accent-rare-rgb), 0.65) 66%,
        rgba(var(--accent-warm-rgb), 0.65) 100%));
      background-size: var(--bar-stripe-size);
      animation: glowBar var(--bar-speed-base) linear infinite;
      opacity: 1;
      pointer-events: none;
    }

    .help-tabs{
      display: flex;
      align-items: center;
      gap: var(--tabs-gap);
      flex-wrap: wrap;
      justify-content: center;
      padding: 6px 6px;
      box-shadow: none;
    }

    .help-tab{
      appearance: none;
      border: 0;
      background: transparent;
      padding: var(--tabs-pad-y) var(--tabs-pad-x);
      font: inherit;
      font-weight: 700;
      color: var(--tabs-text-muted);
      cursor: pointer;
      position: relative;
      overflow: visible;
      z-index: 0;
    }

    .help-tab .hl{
      display: inline-block;
    }

    /* Keep tab highlights clean (no stray dots/halos) */
    .help-tabs .tab-highlight .hl::before,
    .help-tabs .tab-highlight .hl.is-on::before{
      display: none !important;
    }

    .help-tab.is-active{
      color: var(--tabs-text);
      box-shadow: none;
      filter: saturate(1.02);
    }

    .help-tab:focus-visible{
      outline: none;
      box-shadow: none;
      color: var(--tabs-text);
    }

    .help-tab:hover{
      transform: scale(1.02);
    }

    @media (prefers-reduced-motion: reduce){
      .help-tab{ transition: none; transform: none !important; }
      .help-tab:hover{ transform: none; }
    }

    @media (max-width: 720px){
      .help-tabs{
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: var(--space-sm);
        padding: 0;
        overflow: visible;
      }
      .help-tab{
        justify-self: stretch;
        text-align: center;
      }
      .help-tab:hover{ transform: none; }
      .help-detail-cta{ display: none; }
    }

    .help-panels{ width: 100%; margin-bottom: 0; }

    .help-panel{
      display: none;
      margin: 0;
      padding: 0;
      border: 1px solid rgba(var(--tab-hl-rgb, 155,122,247), 0.10);
      background: transparent;
      box-shadow: none;
      border-bottom: 0;
    }
    .help-panel.is-active{
      display: block; 
      border-radius: var(--radius-sm);
      border: 1px solid rgba(var(--tab-hl-rgb, 155,122,247), .4);
    }

    .help-detail{
      border: 0;
      background: transparent;
      box-shadow: none;
      position:relative;
      overflow:visible;
    }

    .help-detail::before{ content:none; }

    .help-detail-inner{
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      background: linear-gradient(180deg,
        rgba(var(--surface-card-rgb), 1),
        rgba(var(--surface-card-rgb), 0.94));
      border: 1px solid rgba(var(--border, #DAD5CE), 0.6);
      box-shadow: 0 14px 36px rgba(0,0,0,0.08);
      margin: 0;
      border-top: 0;
    }

    .help-detail-head h3{
      margin:0 0 6px;
      font-size: var(--type-h3);
      line-height: 1.3;
    }

    .help-detail-head .fine{
      font-size: var(--type-small);
      line-height: 1.6;
      font-weight: 500;
    }

    .help-bullets{
      margin:12px 0 0;
      padding-left: 18px;
      color: var(--text-muted);
      line-height: 1.6;
      font-size: var(--type-small);
      font-weight: 500;
      letter-spacing: 0;
    }

    .help-bullets li{ margin:8px 0; }

    /* Make bullets feel consistent with the text (not heavy/oversized) */
    .help-bullets li::marker{
      color: rgba(var(--text-muted-rgb), 0.7);
      font-size: 0.95em;
    }

    .help-detail-cta{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:16px;
    }

    .help-accordion{ display:none; }

    .help-accordion details{
      border:1px solid var(--border);
      border-radius: var(--radius-md);
      background: linear-gradient(180deg,
        var(--card-top),
        var(--card-bottom));
      box-shadow: var(--shadow);
      padding:var(--space-md) var(--space-lg);
      margin-bottom:12px;
      overflow:hidden;
    }

    .help-accordion summary{
      cursor:pointer;
      font-weight:700;
      list-style:none;
    }

    .help-accordion summary::-webkit-details-marker{ display:none; }

    @media (min-width: 900px){
      .help-split{ display:block; grid-template-columns: none; }
      .help-accordion{ display:none; }
    }

    /* ============================================================
       Fortune Cookie (image-based)
       ============================================================ */
    .fortune-wrap{
      position: relative;
      padding: 0 80px 0 0;
      margin: -120px 0 -80px 0;
      overflow: visible;
      display: flex;
      justify-content: flex-end;
    }

    .fortune-stage{
      position: relative;
      min-height: 200px;
      perspective: 900px;
      width: min(520px, 100%);
    }

    .cookie{
      position: absolute;
      right: 0;
      top: -30px;
      width: 300px;
      height: 300px;
      padding: 0;
      border: 0;
      background: transparent;
      cursor: default;
      outline: none;
      overflow: visible;
      --split: 0px;
      --lift: 0px;
      --paper-opacity: 0;
      --paper-scale: .92;
      --paper-tilt: 12deg;
      --paper-y: 40%;
      --paper-w: calc(60% + 30px);
      --paper-h: 47px;
      --paper-offset-x: 0px;
      --paper-offset-y: 9px;
    }

    .cookie:focus-visible{
      border-radius: 26px;
      box-shadow: 0 0 0 4px rgba(var(--focus-ring-rgb), 0.35);
    }

    .cookie-shadow{
      position:absolute;
      left: 50%;
      top: calc(var(--paper-y) + var(--paper-offset-y) + 16px);
      width: 120px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(closest-side, rgba(17,20,24,.26), transparent 70%);
      filter: blur(1px);
      opacity: 0;
      transition: transform .35s ease, opacity .35s ease;
      z-index: 0;
    }

    .shadow-left{
      transform: translateX(calc(-50% - var(--split))) scaleX(.95);
    }
    .shadow-right{
      transform: translateX(calc(-50% + var(--split))) scaleX(.95);
    }

    .cookie-shell{
      position:absolute;
      left: 50%;
      top: 50%;
      width: 78%;
      height: auto;
      transform: translate(-50%, -50%);
      z-index: 2;
      opacity: 1;
      transition: opacity .35s ease;
      filter: drop-shadow(0 16px 20px rgba(17,20,24,.18));
      pointer-events: none;
      display: block;
    }

    .cookie-half{
      position:absolute;
      top: 50%;
      width: 52%;
      height: auto;
      z-index: 3;
      opacity: 0;
      transition: transform 650ms cubic-bezier(.2,.8,.2,1), opacity .35s ease;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.16));
      pointer-events: none;
      display: block;
    }

    .cookie-left{
      left: 6%;
      transform: translateY(-50%) translateX(calc(0px - var(--split))) translateY(var(--lift));
    }
    .cookie-right{
      right: 6%;
      transform: translateY(-50%) translateX(var(--split)) translateY(var(--lift));
    }

    .fortune-paper{
      position:absolute;
      left: 50%;
      top: var(--paper-y);
      transform: translate(-50%, -50%) translate(var(--paper-offset-x), var(--paper-offset-y)) scale(var(--paper-scale)) rotateX(var(--paper-tilt));
      transform-origin: center;
      width: var(--paper-w);
      height: var(--paper-h);
      border-radius: 0;
      opacity: var(--paper-opacity);
      pointer-events:none;
      cursor: default;
      transition: opacity .4s ease, transform .55s ease;
      filter: drop-shadow(0 6px 10px rgba(17,20,24,.12));
      z-index: 1;
      background: #ffffff;
      background-repeat: no-repeat;
      background-position: center;
      clip-path: polygon(0 0, 100% 0, calc(100% - 15px) 100%, 15px 100%);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow:
        inset 0 1px 0 #ffffff,
        inset 0 -1px 0 rgba(0,0,0,.04);
    }

    .fortune-text{
      position:absolute;
      inset: 10px 16px 10px 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-size: 10px; /* decorative: keep small so both lines fit */
      line-height: 1.2;
      color: rgba(31,24,20,.88);
      font-weight: 200;
      letter-spacing: .1px;
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
      cursor: default;
    }

    .crumbs{
      position:absolute;
      left: 50%;
      top: calc(var(--paper-y) - 40px);
      transform: translateX(-50%);
      width: 260px;
      height: 140px;
      pointer-events:none;
      overflow: visible;
      z-index: 2;
    }
    .crumb{
      position:absolute;
      width: 8px;
      height: 6px;
      border-radius: 3px;
      opacity: 0;
      background: linear-gradient(145deg, #f6cb90, #c9823f);
      box-shadow: 0 8px 10px rgba(17,20,24,.12);
    }

    .cookie.is-open{
      --split: 80px;
      --lift: 0px;
      --paper-opacity: 1;
      --paper-scale: 1;
      --paper-tilt: 0deg;
    }
    .cookie.is-open .cookie-shell{
      opacity: 0;
    }
    .cookie.is-open .cookie-half{
      opacity: 1;
    }
    .cookie.is-open .cookie-left{
      transform: translateY(-50%) translateX(calc(0px - var(--split))) translateY(calc(var(--lift) - 1px)) rotate(-2deg) scale(1.1);
    }

    .cookie.is-open .cookie-right{
      transform: translateY(-50%) translateX(var(--split)) translateY(var(--lift)) scale(1.05);
    }
    .cookie.is-open .cookie-shadow{
      opacity: .45;
    }
    .cookie:hover .cookie-half{
      filter: drop-shadow(0 22px 20px rgba(17,20,24,.10));
    }

    @keyframes crumbFall{
      0%{ transform: translateY(-6px) translateX(0px) rotate(0deg) scale(var(--scale)); opacity: 0; }
      15%{ opacity: .95; }
      100%{ transform: translateY(90px) translateX(var(--dx)) rotate(var(--dr)) scale(var(--scale)); opacity: .95; }
    }
    .cookie.is-open .crumb{
      animation: crumbFall .85s ease forwards;
    }

    @media (max-width: 700px){
      .fortune-wrap{ padding: 0; justify-content: center; margin: calc(-1 * var(--section-gap)) 0 var(--section-gap) 0; }
      .fortune-stage{ width: 100%; min-height: 200px; }
      .cookie{ left: 50%; right: auto; transform: translateX(-50%); }
    }

    /* ============================================================
       13) Calendly Schedule Cards (clean + consistent)
       ============================================================ */

    .schedule-grid{
      display:grid;
      gap: var(--space-lg);
      grid-template-columns: 1fr;
      align-items: stretch;
    }

    @media (min-width: calc(var(--bp-sm) + 1px)){
      .schedule-grid{
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      }
    }

    /* Force 3-up layout on wider screens */
    @media (min-width: 900px){
      .schedule-grid{
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    /* Use the shared surface style, but make schedule cards behave like real buttons */
    /* Make schedule cards feel like tappable tiles */
    .schedule-card{
      -webkit-appearance:none;
      appearance:none;
      border-radius: var(--radius-md);
      padding: 28px 26px;
      text-align:left;
      width:100%;
      cursor:pointer;
      font: inherit;
      color: inherit;

      display:flex;
      flex-direction: column;
      gap:14px;
      position: relative;
      overflow: hidden;
      isolation: isolate;

      transition: transform 200ms ease, box-shadow 200ms ease, background 200ms ease;
    }

    /* Hover/press: subtle, not “game UI” */
    /* Accessible, good-looking focus ring */
    .schedule-card:focus { outline: none; }

    .schedule-card:focus-visible{
      outline: 3px solid var(--focus-outline-strong);
      outline-offset: 3px;
      border-radius: calc(var(--radius-md) + 2px);
    }

    /* Match surface hover/active shadows */
    .schedule-card:hover{
      transform: none;
      box-shadow: var(--shadow-card);
    }

    .schedule-card:active{
      transform: none;
      box-shadow: var(--shadow-card);
    }

        /* ============================================================
       Schedule clock badge (fixed pomodoro icon)
       ============================================================ */
    .schedule-clock{
      position: absolute;
      right: 16px;
      bottom: 16px;
      pointer-events: none;
      z-index: 1;
    }

    .clock{
      position: relative;
      display: inline-block;
      width: 52px;
      height: 52px;
      color: rgba(var(--text-muted-rgb), 1);
      isolation: isolate;
    }

    @media (max-width: var(--bp-sm)){
      .clock{
        width: 44px;
        height: 44px;
      }
    }

    .clock svg{
      width: 100%;
      height: 100%;
      display: block;
    }

    .pomodoro{
      position: absolute;
      inset: 11px 10px 9px 10px; /* nudged 1px downward while keeping overall size */
      display: grid;
      place-items: center;
    }

    .arc{
      width: 78%;
      height: 78%;
      border-radius: 50%;
      position: relative;
      --clock-accent: var(--accent-warm, #d46a1f);
    }

    .arc::after{
      content: "";
      position: absolute;
      inset: 8px;
      background:
        radial-gradient(
          circle at center,
          transparent 0 12px,
          var(--surface-card, #f5f7f6) 20px 100%
        );
      border-radius: 50%;
    }

    .clock::after{
      content: "";
      position: absolute;
      left: 50%;
      bottom: -10px;
      width: 80%;
      height: 8px;
      transform: translateX(-50%);
      background: radial-gradient(
        ellipse at center,
        rgba(0, 0, 0, 0.25) 0%,
        rgba(0, 0, 0, 0.15) 35%,
        rgba(0, 0, 0, 0.05) 55%,
        transparent 40%
      );
      pointer-events: none;
      z-index: -1;
    }

    /* Micro-wiggle on hover */
    @keyframes tilt-n-move-shaking{
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(5px, 5px) rotate(5deg); }
      50% { transform: translate(0, 0) rotate(0deg); }
      75% { transform: translate(-5px, 5px) rotate(-5deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }

    @keyframes shadow-shift{
      0% { transform: translateX(-50%); }
      25% { transform: translateX(calc(-50% + 3px)); }
      50% { transform: translateX(-50%); }
      75% { transform: translateX(calc(-50% - 3px)); }
      100% { transform: translateX(-50%); }
    }

    /* Alarm wiggle after timer completes (no hover wiggle) */
    .clock.alarm svg,
    .clock.alarm .pomodoro{
      animation: tilt-n-move-shaking 520ms ease-in-out 3;
    }
    .clock.alarm::after{
      animation: shadow-shift 520ms ease-in-out 3;
    }

    @media (prefers-reduced-motion: reduce){
      .clock.alarm svg,
      .clock.alarm .pomodoro,
      .clock.alarm::after{
        animation: none;
      }
    }

    .schedule-body{
      flex: 1;
    }

    .schedule-footer{
      margin-top: 16px;
      display:flex;
      flex-direction:column;
      align-items: flex-start; /* prevent CTA from stretching full width */
      gap:6px;
    }

    /* Layout pieces */
    /* These margins become redundant once gap is doing the work */
    .schedule-top{
      display:flex;
      align-items: flex-start;
      gap: var(--space-sm);
      margin-bottom: 0;
    }

    .schedule-title{
      margin:0;
      font-size: var(--type-h3);
      line-height: 1.18;
      letter-spacing: -.2px;
    }

    .schedule-sub{
      margin: 6px 0 6px;
      color: var(--text-muted);
      font-size: 14px;
      line-height: 1.35;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-weight: 200;
    }

    .schedule-desc{
      margin: 0;
      color: var(--text-muted);
      font-size: var(--type-body);
      line-height: 1.6;
      max-width: 70ch;
      flex: 1;
    }

    /* Make “Book” line sit at the bottom with subtle styling */
    /* Push the CTA to the bottom so cards feel uniform */
    .schedule-cta{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      font-weight: 700;
      font-size: var(--type-body);
      color: var(--primary);
      text-decoration: none;
      border: 1px solid rgba(var(--primary-rgb), 0.15);
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 60%),
        linear-gradient(180deg, var(--card-top), var(--card-bottom));
      border-radius: 12px;
      padding: 10px 14px;
      margin-top:auto;
      box-shadow:
        var(--shadow),
        inset 0 1px 0 rgba(255,255,255,0.7);

      text-transform: capitalize;
      pointer-events: none; /* decorative; prevent hover from interrupting card/clock interactions */

      opacity: 0;
      transform: translateY(6px);
      transition:
        opacity .35s ease,
        transform .35s ease,
        color .22s ease,
        background .22s ease,
        border-color .22s ease,
        box-shadow .22s ease;
      transition-delay: 0s;
    }

    .schedule-card:hover .schedule-cta,
    .schedule-card:focus-visible .schedule-cta{
      opacity: 1;
      transform: translateY(0);
      transition-delay: .5s;
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 60%),
        linear-gradient(180deg, var(--card-top), var(--card-bottom));
      border-color: rgba(var(--primary-rgb), 0.28);
      box-shadow:
        var(--shadow),
        inset 0 1px 0 rgba(255,255,255,0.7);
    }

    .schedule-card.is-visible .schedule-cta{
      opacity: 1;
      transform: translateY(0);
      transition-delay: .5s;
      background:
        linear-gradient(180deg,
          rgba(255,255,255,0.65),
          rgba(255,255,255,0) 60%),
        linear-gradient(180deg, var(--card-top), var(--card-bottom));
      border-color: rgba(var(--primary-rgb), 0.28);
      box-shadow:
        var(--shadow),
        inset 0 1px 0 rgba(255,255,255,0.7);
    }

    /* ============================================================
       14) Coachmarks / Tooltips (Accessible Popovers)
       ============================================================ */
    .hero-theme-control{
      position: absolute;
      right: 0;
      top: 0;
      display:flex;
      align-items:center;
      gap: var(--space-sm);
      overflow: visible;
    }
    .theme-toggle{
      position: relative;
      width: var(--toggle-hit);
      height: var(--toggle-hit);
      padding: var(--toggle-inset);
      border-radius: 50%;
      border: 0;
      background-clip: content-box;
      background-origin: content-box;
      background:
        radial-gradient(circle at 32% 32%,
          rgba(255,255,255,.6) 0%,
          rgba(255,244,215,.35) 20%,
          rgba(255,214,128,.2) 48%,
          rgba(255,180,90,.1) 70%,
          transparent 90%),
        radial-gradient(circle at 50% 60%,
          #ffe7a2 0%,
          #f0b45c 45%,
          #e78c2a 75%,
          #d25d06 100%);
      box-shadow:
        0 0 12px rgba(255, 190, 120, 0.45),
        0 0 28px rgba(255, 140, 30, 0.25);
      transition: box-shadow .25s ease, transform .15s ease;
      cursor: pointer;
      overflow: hidden;
      isolation: isolate;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      will-change: transform;
    }
    .theme-toggle__glow{
      position:absolute;
      inset: 0;
      border-radius: 50%;
      background:
        radial-gradient(circle at 30% 25%,
          rgba(255,245,204,.45) 0%,
          rgba(255,213,128,.28) 35%,
          rgba(255,184,90,0) 70%);
      box-shadow:
        0 0 10px rgba(255, 190, 140, 0.35),
        0 0 22px rgba(255, 140, 50, 0.2);
      z-index: -2;
      animation: glowPulse 6s ease-in-out infinite;
      pointer-events:none;
    }
    :root[data-theme="dark"] .theme-toggle__glow{
      background:
        radial-gradient(circle at 35% 35%,
          rgba(255,255,255,0.18) 0%,
          rgba(255,255,255,0) 55%),
        radial-gradient(circle at 50% 50%,
          rgba(145, 163, 195, 0.28) 0%,
          rgba(95, 114, 144, 0) 70%);
      box-shadow:
        0 0 14px rgba(170, 190, 220, 0.24),
        0 0 26px rgba(90, 115, 150, 0.18);
    }
    @keyframes glowPulse{
      0%{ transform: scale(1); opacity: 0.85; }
      50%{ transform: scale(1.06); opacity:0.98; }
      100%{ transform: scale(1); opacity:0.85; }
    }
    .theme-toggle::before{
      content:"";
      position:absolute;
      inset: calc(var(--toggle-inset) + 1px);
      border-radius: 50%;
      background:
        radial-gradient(circle at 32% 34%,
          rgba(255,255,255,.40) 0%,
          rgba(255,255,255,.18) 22%,
          rgba(255,255,255,0) 52%);
      opacity: .9;
      pointer-events:none;
      z-index: 1;
    }
    :root[data-theme="dark"] .theme-toggle{
      background:
        radial-gradient(circle at 30% 30%,
          rgba(255,255,255,.35) 0%,
          rgba(255,255,255,0) 45%),
        radial-gradient(circle at 50% 55%,
          #eef0f6 0%,
          #cfd6e3 55%,
          #9aa6bf 100%);
      box-shadow:
        0 0 14px rgba(255,255,255,.30),
        inset 0 0 3px rgba(255,255,255,.2);
    }
    :root[data-theme="dark"] .theme-toggle::after{
      content:"";
      position:absolute;
      inset: var(--toggle-inset);
      border-radius: 50%;
      background: rgba(7,18,45,.88);
      transform: translateX(calc((var(--moon-phase) - 0.5) * 68px));
      filter: blur(0.2px);
      opacity: .9;
      pointer-events:none;
      z-index: 0;
    }


    /* ============================================================
       15) Footer
       ============================================================ */
    footer{
      padding:24px 0;
      color: var(--text-muted);
      border-top: 1px solid var(--divider);
      margin-top: var(--section-gap);
      text-align: center;
    }

    /* ============================================================
       Responsive rules (5 breakpoints)
       Breakpoints:
       - xs: <= 480px (mobile portrait)
       - sm: 481–720px (mobile landscape / small)
       - md: 721–960px (tablet)
       - lg: 961–1200px (small desktop / laptop)
       - xl: >= 1440px (large desktop / ultra-wide)
       ============================================================ */

    /* XS: Mobile portrait */
    @media (max-width: var(--bp-xs)){
      :root{
        --section-gap: var(--space-2xl);
        --type-h3: 22px;
      }
      .wrap{ padding: 0 var(--space-md); }
      header{ padding-left: var(--space-md); padding-right: var(--space-md); }

      header,
      .hero-actions,
      .subhead{ text-align: left; }

      .hero-theme-control{
        top: 0;
        right: 0;
      }

      .subhead{
        max-width: 96%;
        padding: 0 var(--space-1);
        margin: calc(var(--hero-title-size) / 3) 0 var(--hero-title-size);
        font-size: clamp(var(--type-body), 3.8vw, 18px);
        line-height: var(--lh-body);
        text-align: center;
      }
      .section-lede{
        max-width: 96%;
        text-align: center;
      }

      .schedule-grid{ gap: var(--space-lg); }
      .schedule-card{ padding: var(--space-lg)}
      .fortune-wrap{ padding: 0; justify-content: center; }
      .tape-track{ font-size: 12.5px; gap: 12px; }
      .tape-run{ gap: var(--space-xs); padding-right: var(--space-xs); }
      .ticker-section{ margin: var(--space-xl) 0; }
    }

    /* SM: Mobile landscape / small */
    @media (min-width: calc(var(--bp-xs) + 1px)) and (max-width: var(--bp-sm)){
      :root{
        --section-gap: var(--space-2xl);
        --type-h3: 24px;
      }
      .wrap{ padding: 0 var(--space-md); }
      header{ padding-left: var(--space-md); padding-right: var(--space-md); }

      header,
      .hero-actions,
      .subhead{ text-align: left; }

      .section-lede{
        max-width: 94%;
        text-align: center;
      }

      .schedule-grid{ gap: var(--space-md); }

      .fortune-wrap{ padding: 0; justify-content: center; }
      .ticker-section{ margin: var(--space-xl) 0; }
    }

    /* MD: Tablet */
    @media (min-width: calc(var(--bp-sm) + 1px)) and (max-width: var(--bp-md)){
      .wrap{ padding: var(--space-xl); }

      .subhead{ max-width: 66%; }

      .about-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    /* LG: Desktop / laptop */
    @media (min-width: calc(var(--bp-md) + 1px)) and (max-width: var(--bp-lg)){
      .about-grid{ grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }

      .subhead{ max-width: 60%; }

      .schedule-card{ padding: 22px 22px 20px; }
    }

    /* XL: Large desktop / ultra-wide (polish only) */
    @media (min-width: var(--bp-xl)){
      :root{ --max: 1200px; }

      section{ margin: 120px 0; }
      .wrap > header{ margin-bottom: 120px; }

      .section-lede{ max-width: 72ch; }
      .subhead{ max-width: 55%; }
    :root{ --section-gap: calc(var(--space-3xl) + 44px); }
    }

    /* ============================================================
       16) Reduced motion
       ============================================================ */
    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; }
      html{ scroll-behavior:auto; }
      body::after{ animation:none; }
      .hl.is-on::before{ animation: none; opacity: 1; width: 100%; }
    }

    /* end @layer components */
    }

    @layer utilities {
      .stack-tight > .fine{ margin:0; }
      .stack-tight > .fine + .fine{ margin-top:10px; }
      .mt-16{ margin-top:16px; }
      .mb-8{ margin-bottom:8px; }
      .m-0{ margin:0; }
      .flow-s > * + *{ margin-top: var(--space-sm); }
      .flow-m > * + *{ margin-top: var(--space-md); }
      .brand-embed{
        width: 100%;
        min-height: 520px;
        border: 0;
        border-radius: 14px;
        box-shadow:
          0 14px 30px rgba(0,0,0,0.12),
          0 0 0 1px rgba(0,0,0,0.06);
        overflow: hidden;
      }
      .flow-l > * + *{ margin-top: var(--space-lg); }
      .section-pad{ padding: var(--space-3xl) 0; }
      @media (max-width: 720px){
        .section-pad{ padding: var(--space-2xl) 0; }
      }
      .section-pad-bottom-100{ margin-bottom:0; padding-bottom:100px; }
      .section-pad-top-100{ margin-top:0; padding-top:100px; }
      .section-tight-top{ margin:0 0 100px 0; padding-top:100px; }
      .sr-only{
        position:absolute;
        width:1px;
        height:1px;
        padding:0;
        margin:-1px;
        overflow:hidden;
        clip: rect(0,0,0,0);
        white-space:nowrap;
        border:0;
      }
      .sr-only.is-visible{
        position:static;
        width:auto;
        height:auto;
        margin:8px 0 0;
        overflow:visible;
        clip:auto;
        white-space:normal;
      }
    }
  </style>

  <!-- Calendly popup widget assets -->
  <link rel="preconnect" href="https://assets.calendly.com" crossorigin>
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
</head>

<body>
  <a class="skip-link" href="#top">Skip to main content</a>
  <!-- ==========================================================
       Sticky Navigation
       ========================================================== -->
  <div class="nav">
    <div class="nav-inner">
      <a class="brand" href="#top" aria-label="Go to top of page">
        <svg class="brand-logo" aria-hidden="true" viewBox="0 0 64 64" role="img">
          <g fill="none" stroke="var(--primary)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="32" cy="32" r="28" />
            <circle cx="20" cy="22" r="6" />
            <circle cx="44" cy="22" r="6" />
            <circle cx="32" cy="30" r="5.5" />
            <path d="M12 34c6-6 12-8 20-8s14 2 20 8" />
            <path d="M18 42c3-6 8-8 14-8s11 2 14 8" />
            <path d="M24 46v8h-6" />
            <path d="M32 46v8" />
            <path d="M40 46v8h6" />
          </g>
        </svg>
        <span>Mark Malcolm</span>
        <span class="brand-meta" aria-hidden="true">
          <span class="brand-sep">•</span>
          <span>Product Strategy, Visual Direction, Brand Styling</span>
        </span>
      </a>

      <nav class="nav-links" aria-label="Primary navigation">
        <a href="#work">Work</a>
        <a href="#about">About</a>
        <a class="btn" href="#contact">Book a Call</a>
      </nav>
      <button class="nav-toggle" type="button" aria-controls="mobileNavPanel" aria-expanded="false">
        <span class="sr-only">Open navigation</span>
        <span aria-hidden="true">☰</span>
      </button>
    </div>
    <div class="mobile-nav-panel" id="mobileNavPanel" aria-hidden="true">
      <button class="mobile-nav-close" type="button" aria-label="Close navigation">✕</button>
      <a href="#work">Work</a>
      <a href="#about">About</a>
      <a class="btn" href="#contact">Book a Call</a>
    </div>
  </div>

  <main id="top" class="wrap">
    <!-- ==========================================================
         Hero
       ========================================================== -->
    <header class="flow-l">
      <h1>Clear customer paths.<br>Consistent interfaces.<br>Brands people trust.</h1>

      <p class="subhead">
        I help teams turn messy workflows into clear, buildable systems, so people move faster, make fewer mistakes, and trust what they’re looking at. I work across product strategy, visual direction, and branding systems when the work is complex and the stakes are real.
      </p>

    <div class="hero-actions">
      <a class="btn" href="#work">See Case Studies</a>
      <a class="btn ghost" href="#contact">Book a Call</a>
    </div>

    <div class="hero-theme-control" aria-live="polite">
      <span class="sr-only">Theme follows your system preference.</span>
      <button class="theme-toggle" type="button" data-theme-toggle aria-pressed="false">
        <span class="sr-only">Toggle theme</span>
        <span class="theme-toggle__glow" aria-hidden="true"></span>
      </button>
    </div>
  </header>

    
    

    

    

    
    

    
    

    
    

    
<section id="work">
      <h2 class="section-title">Here’s What That Looks Like in Real Life</h2>
      <p class="section-lede">
        A few examples of real projects where I helped teams clarify the problem, align stakeholders, and deliver systems that scaled beyond individual screens.
      </p>

      <div class="grid">
        <article class="card surface stack-card">
          <div class="card-copy">
            <h3>BigIron</h3>
            <p class="meta-line"><strong>Role:</strong> UX Consultant</p>
            <p class="meta-line"><strong>Scope:</strong> Worked with product to map intake workflows, define role-based views, document edge cases, write PRDs, and build annotated clickable prototypes for dev handoff.</p>
            <p class="meta-line"><strong>Outcome:</strong> Gave engineering and stakeholders a shared understanding of complex workflows, and secured buy-in before build.</p>
            <p class="mt-16">
              <button class="btn ghost work-see-more work-see-more--copy" type="button" data-open-stack="#shotStack">See Sample Pages</button>
            </p>
          </div>
          <div class="card-media">
            <button class="btn ghost work-see-more" type="button" data-open-stack="#shotStack">See More</button>
            <div class="work-mosaic" aria-hidden="true">
              <div class="work-mosaic__tiles">
                <div class="work-mosaic__col col-a">
                  <div class="work-mosaic__loop">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                  </div>
                </div>
                <div class="work-mosaic__col col-b">
                  <div class="work-mosaic__loop">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                  </div>
                </div>
                <div class="work-mosaic__col col-c">
                  <div class="work-mosaic__loop">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                    <img src="assets/work/bigiron-stack-2.jpg" alt="">
                    <img src="assets/work/bigiron-stack-4.jpg" alt="">
                    <img src="assets/work/bigiron-stack-1.jpg" alt="">
                    <img src="assets/work/bigiron-stack-5.jpg" alt="">
                    <img src="assets/work/bigiron-stack-3.jpg" alt="">
                  </div>
                </div>
              </div>
            </div>
            
        <div class="shot-stack" id="shotStack" data-shot-stack aria-label="Product screenshots" style="display:none;">
          <div class="shot-card">
            <img src="assets/work/bigiron-stack-1.jpg" alt="Company snapshot and profile form screen" loading="lazy">
              </div>
              <div class="shot-card">
                <img src="assets/work/bigiron-stack-2.jpg" alt="Individual profile edit form screen" loading="lazy">
              </div>
              <div class="shot-card">
                <img src="assets/work/bigiron-stack-3.jpg" alt="Attachments upload screen" loading="lazy">
              </div>
              <div class="shot-card">
                <img src="assets/work/bigiron-stack-4.jpg" alt="Items table view screen" loading="lazy">
              </div>
              <div class="shot-card">
                <img src="assets/work/bigiron-stack-5.jpg" alt="Logistics locations screen" loading="lazy">
              </div>
              <div class="shot-card is-cap">
                <img data-shot-cap-img src="" alt="" loading="lazy">
                <button class="shot-hide btn ghost" type="button" aria-label="Hide this stack">Hide Stack</button>
              </div>
            </div>
          </div>
        </article>
        <article class="card surface">
          <div class="card-copy">
          <h3>Cedar Bluff Tech</h3>
          <p class="meta-line"><strong>Role:</strong> UX Consultant &amp; Designer</p>
          <p class="meta-line"><strong>Scope:</strong> Built the brand system from scratch, including logo and guidelines. Shaped the story, positioning, and experience direction for the parent brand and then applied the same foundation to their flagship software.</p>
          <p class="meta-line"><strong>Outcome:</strong> Humanized and unified the product story across product, marketing, and investor communication, supporting pitch wins, fundraising, and pilot recruitment.</p>
          <p class="meta-line"><strong>Output:</strong> Brand guidelines, product design system, marketing collateral, investor pitch deck.</p>
          <p class="mt-16">
            <a class="btn ghost" href="https://marble-lettuce-c67.notion.site/ebd//142129297c60806ab2bbebdcc41c32e5" data-brand-link data-title="Cedar Bluff Tech – Brand Guidelines">View Brand Guidelines</a>
          </p>
        </div>
      </article>

      <article class="card surface">
        <div class="card-copy">
          <h3>Moss Rock Ranch</h3>
          <p class="meta-line"><strong>Role:</strong> Brand Strategist</p>
          <p class="meta-line"><strong>Scope:</strong> Built the brand foundation and guidelines, clarified purpose and voice, defined audience segments, and created a reusable messaging system the team can apply across channels.</p>
          <p class="meta-line"><strong>Outcome:</strong> Clarified what made the brand distinct and gave the owners a repeatable way to express it, so every channel reinforced the same story instead of competing with itself.</p>
          <p class="meta-line"><strong>Output:</strong> Messaging framework, audience personas, channel playbook, brand guidelines.</p>
          <p class="mt-16">
            <a class="btn ghost" href="https://marble-lettuce-c67.notion.site/ebd//159129297c608030a9cdd6ef8ca51a3d" data-brand-link data-title="Moss Rock Ranch – Brand Guidelines">View Brand Guidelines</a>
          </p>
        </div>
      </article>
      </div>

      <div class="surface case-studies-card">
        <div>
          <h3>Case Studies</h3>
          <p class="fine">A few recent wins, focused on what changed: clearer paths, fewer rework cycles, and faster handoffs.</p>
        </div>
        <div class="case-grid">
          <div class="case-item" data-case-card>
            <header class="case-head">
              <h4>Octagon Wildlife Sanctuary</h4>
              <span class="case-type">Web Redesign</span>
            </header>
            <ul class="case-outcome">
              <li><strong>Outcome:</strong> Trust-first booking path people believe.</li>
              <li>More tour bookings with less friction.</li>
              <li>Donations lifted by clearer asks.</li>
              <li>Fewer support questions after the redesign.</li>
            </ul>

            <div class="case-ribbons" aria-hidden="true" data-open-stack="#wildlifeStack">
              <div class="case-ribbon-row row-a">
                <img src="assets/case_studies/wildlife/wildlife-stack-03.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-04.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-05.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-06.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-07.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-08.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-09.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-10.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-11.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-12.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-b">
                <img src="assets/case_studies/wildlife/wildlife-stack-13.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-14.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-15.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-16.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-03.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-04.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-05.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-06.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-07.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-08.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-c">
                <img src="assets/case_studies/wildlife/wildlife-stack-09.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-10.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-11.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-12.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-13.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-14.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-15.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-16.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-03.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/wildlife/wildlife-stack-04.jpg" alt="" loading="lazy">
              </div>
            </div>
            <div class="case-cta">
              <button class="btn" type="button" data-open-stack="#wildlifeStack">Open Case Study</button>
            </div>
            <!-- Hidden stack for overlay viewer reuse -->
            <div class="shot-stack" id="wildlifeStack" data-shot-stack data-overlay-title="Octagon Wildlife Sanctuary" style="display:none;">
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-02.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-03.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-04.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-05.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-06.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-07.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-08.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-09.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-10.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-11.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-12.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-13.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-14.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-15.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/wildlife/wildlife-stack-16.jpg" alt=""></div>
              <div class="shot-card is-cap">
                <img data-shot-cap-img src="" alt="" loading="lazy">
                <button class="shot-hide btn ghost" type="button" aria-label="Hide this stack">Hide Stack</button>
              </div>
            </div>
          </div>
          <div class="case-item" data-case-card>
            <header class="case-head">
              <h4>Flix &amp; Feast</h4>
              <span class="case-type">Concept</span>
            </header>
            <ul class="case-outcome">
              <li><strong>Outcome:</strong> Centered the concept on “alignment,” not recommendations.</li>
              <li>Messaging makes the wedge obvious in one glance.</li>
              <li>Lock-in flow tightened so couples advance together.</li>
              <li>Reduced ambiguity about next steps.</li>
            </ul>
            <div class="case-ribbons" aria-hidden="true" data-open-stack="#flixStack">
              <div class="case-ribbon-row row-a">
                <img src="assets/case_studies/flix/flix-stack-18.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-19.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-20.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-21.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-22.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-23.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-24.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-25.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-26.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-27.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-b">
                <img src="assets/case_studies/flix/flix-stack-28.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-29.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-30.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-31.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-32.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-33.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-34.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-35.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-36.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-37.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-c">
                <img src="assets/case_studies/flix/flix-stack-38.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-39.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-40.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-41.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-42.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-18.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-19.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-20.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-21.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flix/flix-stack-22.jpg" alt="" loading="lazy">
              </div>
            </div>
            <div class="case-cta">
              <button class="btn" type="button" data-open-stack="#flixStack">Open Case Study</button>
            </div>
            <!-- Hidden stack for overlay viewer reuse -->
            <div class="shot-stack" id="flixStack" data-shot-stack data-overlay-title="Flix &amp; Feast" style="display:none;">
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-17.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-18.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-19.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-20.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-21.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-22.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-23.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-24.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-25.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-26.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-27.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-28.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-29.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-30.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-31.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-32.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-33.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-34.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-35.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-36.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-37.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-38.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-39.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-40.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-41.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flix/flix-stack-42.jpg" alt=""></div>
              <div class="shot-card is-cap">
                <img data-shot-cap-img src="" alt="" loading="lazy">
                <button class="shot-hide btn ghost" type="button" aria-label="Hide this stack">Hide Stack</button>
              </div>
            </div>
          </div>
          <div class="case-item" data-case-card>
            <header class="case-head">
              <h4>FL Urban Agriculture</h4>
              <span class="case-type">Brand + Web</span>
            </header>
            <ul class="case-outcome">
              <li><strong>Outcome:</strong> Cohesive identity across brand and web.</li>
              <li>Clear “what we do + how to help” story.</li>
              <li>Repeatable messaging the team can use anywhere.</li>
              <li>Aligned site structure that supports the brand narrative.</li>
            </ul>

            <div class="case-ribbons" aria-hidden="true" data-open-stack="#flagrStack">
              <div class="case-ribbon-row row-a">
                <img src="assets/case_studies/flagr/flagr-stack-44.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-45.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-46.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-47.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-48.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-b">
                <img src="assets/case_studies/flagr/flagr-stack-49.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-50.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-51.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-52.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-44.jpg" alt="" loading="lazy">
              </div>
              <div class="case-ribbon-row row-c">
                <img src="assets/case_studies/flagr/flagr-stack-45.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-46.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-47.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-48.jpg" alt="" loading="lazy">
                <img src="assets/case_studies/flagr/flagr-stack-49.jpg" alt="" loading="lazy">
              </div>
            </div>
            <div class="case-cta">
              <button class="btn" type="button" data-open-stack="#flagrStack">Open Case Study</button>
            </div>
          </div>
            <!-- Hidden stack for overlay viewer reuse -->
            <div class="shot-stack" id="flagrStack" data-shot-stack data-overlay-title="FL Urban Agriculture" style="display:none;">
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-43.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-44.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-45.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-46.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-47.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-48.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-49.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-50.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-51.jpg" alt=""></div>
              <div class="shot-card"><img src="assets/case_studies/flagr/flagr-stack-52.jpg" alt=""></div>
              <div class="shot-card is-cap">
                <img data-shot-cap-img src="" alt="" loading="lazy">
                <button class="shot-hide btn ghost" type="button" aria-label="Hide this stack">Hide Stack</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <section class="ticker-section" aria-label="Skills ticker">
      <!-- ==========================================================
           Ticker Tape (full-bleed, analog)
           ========================================================== -->
      <p class="fine ticker-label" id="tickerLabel">Skills I tap into...</p>
      <div class="ticker-bleed" role="region" aria-labelledby="tickerLabel" aria-describedby="tickerA11y">
        <span class="sr-only" id="tickerA11y">
          Outcome-first UX, clearer workflows. Design systems, consistent UI. Workflow mapping, fewer mistakes.
          Requirements, less ambiguity. Handoff clarity, faster delivery. Brand systems, cohesive output. Alignment, less rework.
        </span>
        <div class="ticker-clip" aria-hidden="true">
          <div id="tickerTape">
            <div class="tape-edge top" aria-hidden="true"></div>
            <div class="tape-edge bottom" aria-hidden="true"></div>

            <div class="tape-track" id="tickerTrack">
              <div class="tape-run">
                <span class="tape-item"><span class="tape-key">Outcome-first UX</span><span class="tape-sep"> = </span><span class="tape-val">clearer workflows</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Design systems</span><span class="tape-sep"> = </span><span class="tape-val">consistent UI</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Workflow mapping</span><span class="tape-sep"> = </span><span class="tape-val">fewer mistakes</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Requirements</span><span class="tape-sep"> = </span><span class="tape-val">less ambiguity</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Handoff clarity</span><span class="tape-sep"> = </span><span class="tape-val">faster delivery</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Brand systems</span><span class="tape-sep"> = </span><span class="tape-val">cohesive output</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Alignment</span><span class="tape-sep"> = </span><span class="tape-val">less rework</span></span>
              </div>

              <div class="tape-run" aria-hidden="true">
                <span class="tape-item"><span class="tape-key">Outcome-first UX</span><span class="tape-sep"> = </span><span class="tape-val">clearer workflows</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Design systems</span><span class="tape-sep"> = </span><span class="tape-val">consistent UI</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Workflow mapping</span><span class="tape-sep"> = </span><span class="tape-val">fewer mistakes</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Requirements</span><span class="tape-sep"> = </span><span class="tape-val">less ambiguity</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Handoff clarity</span><span class="tape-sep"> = </span><span class="tape-val">faster delivery</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Brand systems</span><span class="tape-sep"> = </span><span class="tape-val">cohesive output</span></span><span class="tape-pipe"> | </span>
                <span class="tape-item"><span class="tape-key">Alignment</span><span class="tape-sep"> = </span><span class="tape-val">less rework</span></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="ticker-controls-row">
        <div class="ticker-controls" role="group" aria-label="Ticker controls">
          <button class="btn ghost ticker-btn" type="button" data-speed="0.55" aria-pressed="false" aria-label="Slow ticker">
            <span class="speed-label speed-label--left" aria-hidden="true">Slower</span>
            <svg class="ticker-icon" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="10" cy="12" r="5"></circle>
              <circle cx="16.8" cy="12" r="2"></circle>
              <path d="M7 17v2M11 17v2"></path>
              <path d="M6 7v-2M10 7v-2"></path>
              <path d="M4 12h-2"></path>
            </svg>
          </button>
          <button class="btn ticker-btn" type="button" id="tickerToggle" aria-pressed="false" aria-label="Pause motion">⏸</button>
          <button class="btn ghost ticker-btn" type="button" data-speed="1.15" aria-pressed="false" aria-label="Speed up ticker">
            <svg class="ticker-icon" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="13" r="4"></circle>
              <path d="M10 3v6M14 3v6"></path>
              <path d="M8 16c2 2 6 2 8 0"></path>
            </svg>
            <span class="speed-label speed-label--right" aria-hidden="true">Faster</span>
          </button>
        </div>

        <div class="ticker-helper fine" id="tickerHelper">
          <em>Tip: Click <span class="no-italic">⏸</span> to stop motion.</em>
        </div>
      </div>
    </section>

    <section id="about" class="section-pad-bottom-100">
      <h2 class="section-title">About Me</h2>
      <p class="section-lede">
        My background spans high-stakes projects in design, brand systems, and customer-facing operations. That combination taught me how to see the system, not just the interface.
      </p>

      <div class="callout surface stack-tight flow-m">
        <p class="fine">
          I’m Mark Malcolm, a <span class="hl hl-blue bio-highlight a1">UX Consultant and Senior Designer</span> who helps teams navigate complexity and turn it into systems they can actually build, use, and trust. I’m a <span class="hl hl-amber bio-highlight a2">product partner, not just a screen designer</span>.
        </p>
        <p class="fine">
          My work sits at the intersection of UX strategy, brand systems, and real-world delivery. I’ve spent my career inside environments where <span class="hl hl-teal bio-highlight a3">clarity matters</span>: strict brand guidelines, multi-role workflows, high-stakes operations, and teams trying to move fast without breaking things. That background trained me to look beyond individual screens and focus on how decisions ripple across people, tools, and process.
        </p>
        <p class="fine">
          I’m especially effective when problems feel messy or undefined. I <span class="hl hl-purple bio-highlight a4">turn complex workflows into clear, buildable systems</span>, helping teams surface what’s really happening, align stakeholders around shared goals, and translate ambiguity into clear structure. That often means guiding conversations, tightening requirements, and designing systems that scale, not just interfaces that look good.
        </p>
        <p class="fine">
          I’m comfortable moving between hands-on design and strategic leadership, depending on what the business needs. If there’s a common thread in my work, it’s this: I <span class="hl hl-green bio-highlight a5">reduce ambiguity and rework, so delivery moves faster</span>, and I’m at my best when helping teams find a thoughtful, buildable path forward.
        </p>
      </div>
    </section>

    <section id="help" class="section-pad-top-100">
      <h2 class="section-title">How I Can Help</h2>
      <p class="section-lede">
        These are the ways I typically support teams when the work is complex, cross-functional, or starting to feel fragile as it grows.
      </p>

      <div class="help-split" aria-label="Services list with expanded details">
        <div class="help-card">
          <div class="help-tabs" role="tablist" aria-label="How I can help">
            <button class="help-tab" role="tab" id="tab-ux" aria-selected="true" aria-controls="panel-ux" tabindex="0" type="button" data-hl-rgb="15,109,102"><span class="tab-highlight" data-hl-class="hl-teal">UX Strategy</span></button>
            <button class="help-tab" role="tab" id="tab-systems" aria-selected="false" aria-controls="panel-systems" tabindex="-1" type="button" data-hl-rgb="155,122,247"><span class="tab-highlight" data-hl-class="hl-purple">Design Systems</span></button>
            <button class="help-tab" role="tab" id="tab-brand" aria-selected="false" aria-controls="panel-brand" tabindex="-1" type="button" data-hl-rgb="196,98,42"><span class="tab-highlight" data-hl-class="hl-amber">Brand Strategy</span></button>
            <button class="help-tab" role="tab" id="tab-training" aria-selected="false" aria-controls="panel-training" tabindex="-1" type="button" data-hl-rgb="181,196,68"><span class="tab-highlight" data-hl-class="hl-green">Training Guides</span></button>
          </div>

          <div class="help-panels">
            <section class="help-panel help-detail is-active" role="tabpanel" id="panel-ux" aria-labelledby="tab-ux">
              <div class="help-detail-inner flow-m">
                <div class="help-detail-head">
                  <h3 class="help-panel__title">UX Strategy for Complex Workflows</h3>
                  <p class="fine">
                    When people keep asking the same questions, the process isn’t clear enough yet. I turn tribal knowledge into clear workflows, tighten the handoffs, and make the next step obvious.
                  </p>
                </div>

                <ul class="help-bullets">
                  <li>Workflow mapping that shows where people get stuck</li>
                  <li>Role-based paths and guardrails to reduce mistakes</li>
                  <li>Clear requirements and edge cases so dev can ship confidently</li>
                  <li>Prototype and validate before you build the expensive thing</li>
                  <li>Simple, practical handoff that holds up in the real world</li>
                </ul>

                <div class="help-detail-cta">
                  <a class="btn" href="#contact">Talk It Through</a>
                  <a class="btn ghost" href="#work">See Examples</a>
                </div>
              </div>
            </section>

            <section class="help-panel help-detail" role="tabpanel" id="panel-systems" aria-labelledby="tab-systems" hidden>
              <div class="help-detail-inner flow-m">
                <div class="help-detail-head">
                  <h3 class="help-panel__title">Design Systems and UI Architecture</h3>
                  <p class="fine">
                    If your interface depends on who designed it that week, you don’t have a system yet. I build the components and rules that keep everything aligned.
                  </p>
                </div>

                <ul class="help-bullets">
                  <li>Component inventory and standards that reduce redesign</li>
                  <li>Patterns for forms, tables, empty states, and errors</li>
                  <li>Spacing, typography, and layout rules that scale</li>
                  <li>Accessible-by-default choices, so fewer surprises later</li>
                  <li>Practical documentation developers actually use</li>
                </ul>

                <div class="help-detail-cta">
                  <a class="btn" href="#contact">Talk It Through</a>
                  <a class="btn ghost" href="#work">See Examples</a>
                </div>
              </div>
            </section>

            <section class="help-panel help-detail" role="tabpanel" id="panel-brand" aria-labelledby="tab-brand" hidden>
              <div class="help-detail-inner flow-m">
                <div class="help-detail-head">
                  <h3 class="help-panel__title">Brand Strategy, Copywriting, and Visual Design</h3>
                  <p class="fine">
                    If you sound different in every deck, page, and email, people can’t form a clear picture of you. I align voice, visuals, and messaging to make the brand feel cohesive and trustworthy.
                  </p>
                </div>

                <ul class="help-bullets">
                  <li>Clear positioning and a voice that sounds human</li>
                  <li>Messaging frameworks that stay consistent across channels</li>
                  <li>Visual systems that look modern without trying too hard</li>
                  <li>Copy that explains complex things in plain language</li>
                  <li>Lightweight guidelines your team can reuse</li>
                </ul>

                <div class="help-detail-cta">
                  <a class="btn" href="#contact">Talk It Through</a>
                  <a class="btn ghost" href="#work">See Examples</a>
                </div>
              </div>
            </section>

            <section class="help-panel help-detail" role="tabpanel" id="panel-training" aria-labelledby="tab-training" hidden>
              <div class="help-detail-inner flow-m">
                <div class="help-detail-head">
                  <h3 class="help-panel__title">Training That Scales</h3>
                  <p class="fine">
                    Growth breaks when the know-how lives with one person. We capture your process and turn it into clear onboarding, training, and playbooks so the work stays good as the team gets bigger.
                  </p>
                </div>

                <ul class="help-bullets">
                  <li>New-hire onboarding that doesn’t rely on one “go ask Sarah” person</li>
                  <li>Step-by-step “how we do it here” guides</li>
                  <li>Playbooks and checklists people actually use</li>
                  <li>Workshops to roll out changes without confusion</li>
                  <li>Simple standards that keep quality consistent</li>
                </ul>

                <div class="help-detail-cta">
                  <a class="btn" href="#contact">Talk It Through</a>
                  <a class="btn ghost" href="#work">See Examples</a>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>

      <div class="help-accordion" aria-label="Service details (mobile)">
        <details open class="flow-s">
          <summary>UX Strategy for Complex Workflows</summary>
          <p class="fine">When people keep asking the same questions, the process isn’t clear enough yet. I turn tribal knowledge into clear workflows, tighten the handoffs, and make the next step obvious.</p>
          <ul class="help-bullets">
            <li>Workflow mapping that shows where people get stuck</li>
            <li>Role-based paths and guardrails to reduce mistakes</li>
            <li>Clear requirements and edge cases so dev can ship confidently</li>
            <li>Prototype and validate before you build the expensive thing</li>
            <li>Simple, practical handoff that holds up in the real world</li>
          </ul>
        </details>

        <details class="flow-s">
          <summary>Design Systems and UI Architecture</summary>
          <p class="fine">If your interface depends on who designed it that week, you don’t have a system yet. I build the components and rules that keep everything aligned.</p>
          <ul class="help-bullets">
            <li>Component inventory and standards that reduce redesign</li>
            <li>Patterns for forms, tables, empty states, and errors</li>
            <li>Spacing, typography, and layout rules that scale</li>
            <li>Accessible-by-default choices, so fewer surprises later</li>
            <li>Practical documentation developers actually use</li>
          </ul>
        </details>

        <details class="flow-s">
          <summary>Brand Strategy, Copywriting, and Visual Design</summary>
          <p class="fine">If you sound different in every deck, page, and email, people can’t form a clear picture of you. I align voice, visuals, and messaging to make the brand feel cohesive and trustworthy.</p>
          <ul class="help-bullets">
            <li>Clear positioning and a voice that sounds human</li>
            <li>Messaging frameworks that stay consistent across channels</li>
            <li>Visual systems that look modern without trying too hard</li>
            <li>Copy that explains complex things in plain language</li>
            <li>Lightweight guidelines your team can reuse</li>
          </ul>
        </details>

        <details class="flow-s">
          <summary>Training That Scales</summary>
          <p class="fine">Growth breaks when the know-how lives with one person. We capture your process and turn it into clear onboarding, training, and playbooks so the work stays good as the team gets bigger.</p>
          <ul class="help-bullets">
            <li>Onboarding that doesn’t rely on a “go ask Sarah” person</li>
            <li>Step-by-step “how we do it here” guides</li>
            <li>Playbooks and checklists people actually use</li>
            <li>Workshops to roll out changes without confusion</li>
            <li>Simple standards that keep quality consistent</li>
          </ul>
        </details>
      </div>
    </section>

    <!-- ==========================================================
         Fortune Cookie Delight (optional, small)
         ========================================================== -->
    <section class="fortune-section" aria-label="Fortune cookie interaction">
      <div class="fortune-wrap">
        <div class="fortune-stage" id="fortuneStage">
          <button class="cookie" id="cookieBtn" type="button" aria-label="Open the fortune cookie" data-fortune-cookie>
            <img class="cookie-shell" src="assets/fortune/cookie-closed.png" alt="" aria-hidden="true" />
            <span class="cookie-shadow shadow-left" aria-hidden="true"></span>
            <span class="cookie-shadow shadow-right" aria-hidden="true"></span>
            <img class="cookie-half cookie-left" src="assets/fortune/cookie-left.png" alt="" aria-hidden="true" />
            <img class="cookie-half cookie-right" src="assets/fortune/cookie-right.png" alt="" aria-hidden="true" />

            <span class="fortune-paper">
              <span class="fortune-text" id="fortuneText" role="status" aria-live="polite" data-fortune-text></span>
            </span>

            <span class="crumbs" id="crumbs" aria-hidden="true"></span>
          </button>
        </div>
      </div>
    </section>

    <section id="approach" class="section-pad-bottom-100">
      <h2 class="section-title">
        How We’ll Tackle It
      </h2>
      <p class="section-lede">
        I use a repeatable framework that keeps decisions grounded and reduces rework as we go, but I’m not precious about it. We’ll adjust to fit real constraints, timelines, and stakeholders.
      </p>

      <div class="callout surface approach-card">
        <ol class="process" aria-label="Project process steps">
          <li class="process-step">
            <span class="process-num" aria-hidden="true"></span>

            <div class="process-body">
              <h3 class="process-title">Define the Target</h3>
              <p class="fine process-why">
                We agree on the real problem, the users involved, and what success looks like. This prevents solving the wrong thing elegantly.
              </p>
              <p class="meta-line process-out">
                <strong>Output:</strong> a short problem statement, success criteria, and constraints.
              </p>
            </div>
          </li>

          <li class="process-step">
            <span class="process-num" aria-hidden="true"></span>

            <div class="process-body">
              <h3 class="process-title">Map the Reality</h3>
              <p class="fine process-why">
                We document the current workflow and handoffs, then mark where people get stuck, repeat questions, or make avoidable mistakes.
              </p>
              <p class="meta-line process-out">
                <strong>Output:</strong> workflow map, friction points, and priority opportunities.
              </p>
            </div>
          </li>

          <li class="process-step">
            <span class="process-num" aria-hidden="true"></span>

            <div class="process-body">
              <h3 class="process-title">Design the Next Version</h3>
              <p class="fine process-why">
                We propose a clearer path with roles, steps, and guardrails, then make the next action obvious at every decision point.
              </p>
              <p class="meta-line process-out">
                <strong>Output:</strong> proposed flow, UI structure, content guidelines, and edge cases.
              </p>
            </div>
          </li>

          <li class="process-step">
            <span class="process-num" aria-hidden="true"></span>

            <div class="process-body">
              <h3 class="process-title">Validate Before You Build</h3>
              <p class="fine process-why">
                We test the direction early, using lightweight prototypes or structured reviews, so you don’t pay engineering costs for assumptions.
              </p>
              <p class="meta-line process-out">
                <strong>Output:</strong> validated changes, notes, and final decisions.
              </p>
            </div>
          </li>

          <li class="process-step">
            <span class="process-num" aria-hidden="true"></span>

            <div class="process-body">
              <h3 class="process-title">Ship, Learn, Tighten</h3>
              <p class="fine process-why">
                Once it’s live, we watch for repeat questions, missed steps, and support load, then tighten the system so it holds up over time.
              </p>
              <p class="meta-line process-out">
                <strong>Output:</strong> iteration list, updated standards, and next improvements.
              </p>
            </div>
          </li>
        </ol>
      </div>

      <div class="callout surface stack-tight flow-m">
        <h3 class="about-h3">Why I work this way</h3>

        <p class="fine">
          I came up through hospitality and high-touch customer experience, so I’m tuned for clarity, trust, and decision-making under pressure. If someone has to ask “what do I do next” twice, the process is the problem, not the person.
        </p>

        <p class="fine">
          Today I bring that same mindset to complex products, internal tools, and brands: reduce confusion, tighten handoffs, and build systems that hold up when the team grows, the stakes rise, and the work gets busy.
        </p>
      </div>

    </section>

    <section id="testimonials" class="testimonials section-tight-top flow-m">
        <h3 class="section-title">What People Are Saying</h3>
        <p class="testimonials-title">
          A few things teammates and leaders have said about working with me:
        </p>

        <ul class="testimonial-grid">
          <li class="testimonial-card">
            <figure class="quote-figure quote-teal">
              <div class="quote-top">
                <div class="quote-mark quote-mark--open" aria-hidden="true">“</div>
                <p class="quote-text">
                  Mark <span class="hl hl-teal hl--multi is-on a1">takes initiative</span> and really takes the time to understand user needs. I was impressed with his ability to take complex feedback and simplify it into simple solutions in a timely manner.
                </p>
                <div class="quote-mark quote-mark--close" aria-hidden="true">”</div>
              </div>
              <div class="quote-divider" aria-hidden="true"></div>
              <div class="quote-cite">
                <strong>Kai Mills</strong>
                <h4>UI Designer</h4>
              </div>
            </figure>
          </li>

          <li class="testimonial-card">
            <figure class="quote-figure quote-purple">
              <div class="quote-top">
                <div class="quote-mark quote-mark--open" aria-hidden="true">“</div>
                <p class="quote-text">
                  Mark makes the role of project manager a lot easier, and <span class="hl hl-purple hl--multi is-on a3">listens and respects everyone</span> on the team’s thoughts and opinions.
                </p>
                <div class="quote-mark quote-mark--close" aria-hidden="true">”</div>
              </div>
              <div class="quote-divider" aria-hidden="true"></div>
              <div class="quote-cite">
                <strong>Michael McTavish</strong>
                <h4>Project Manager</h4>
              </div>
            </figure>
          </li>

          <li class="testimonial-card">
            <figure class="quote-figure quote-amber">
              <div class="quote-top">
                <div class="quote-mark quote-mark--open" aria-hidden="true">“</div>
                <p class="quote-text">
                  Mark goes the extra step to ensure his design is thorough and truly addressing the users’ needs. He’s diligent in his research and <span class="hl hl-amber hl--multi is-on a2">backs up every decision with well constructed reasoning</span>.
                </p>
                <div class="quote-mark quote-mark--close" aria-hidden="true">”</div>
              </div>
              <div class="quote-divider" aria-hidden="true"></div>
              <div class="quote-cite">
                <strong>Alan Donth</strong>
                <h4>Product Design</h4>
              </div>
            </figure>
          </li>
        </ul>
      </div>
    </section>

    <section id="contact">
      <h2 class="section-title">Let’s Talk</h2>
      <p class="section-lede">
        If you’re exploring a role, scoping a project, or just need a sounding board, I’m happy to talk it through.
      </p>

    <div class="schedule-grid" aria-label="Calendly scheduling options">
      <span class="sr-only" id="calendlyHint">
        Scheduling opens in Calendly. You may see a quick cookie prompt before selecting a time.
      </span>
          <button
          class="schedule-card surface"
          type="button"
          data-sched-url="https://calendly.com/mark-w3m/15-min-chat"
          data-sched-title="15 Min Chat"
          aria-haspopup="dialog"
          aria-label="Book a 15 minute chat"
          aria-describedby="calendlyHint"
        >
            <div class="schedule-body flow-m">
              <div class="schedule-top">
                <div>
                  <h3 class="schedule-title">15 Min Chat</h3>
                <h4 class="schedule-sub">Quick clarity and next steps</h4>
                </div>
              </div>

            <p class="schedule-desc">
              Best for a quick intro, one focused question, or a fast direction check.
              We’ll name what’s stuck, what “good” looks like, and the next best step.
            </p>
          </div>

          <div class="schedule-footer">
            <div class="schedule-cta">Book 15 Minutes</div>
          </div>
          <div class="schedule-clock" aria-hidden="true">
            <div class="clock desktop">
              <svg
                viewBox="0 0 256 256"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                aria-hidden="true"
              >
                <defs>
                  <clipPath id="bell-clip-15" clipPathUnits="userSpaceOnUse">
                    <rect x="0" y="0" width="256" height="48" />
                  </clipPath>
                </defs>

                <ellipse
                  cx="76"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(-30 76 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-15)"
                />
                <ellipse
                  cx="180"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(30 180 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-15)"
                />

                <circle
                  cx="128"
                  cy="30"
                  r="6"
                  stroke="currentColor"
                  stroke-width="8"
                  fill="currentColor"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="86"
                  stroke="currentColor"
                  stroke-width="20"
                  fill="none"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="10"
                  fill="currentColor"
                />

                <rect
                  x="86"
                  y="204"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(25 86 204)"
                  fill="currentColor"
                />
                <rect
                  x="146"
                  y="212"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(-25 146 204)"
                  fill="currentColor"
                />
              </svg>

              <div class="pomodoro">
                <div class="arc" data-segments="6" style="--clock-accent: var(--dot-15);"></div>
              </div>

            </div>
          </div>
        </button>

          <button
          class="schedule-card surface"
          type="button"
          data-sched-url="https://calendly.com/mark-w3m/30-min-alignment"
          data-sched-title="30 Min Alignment"
          aria-haspopup="dialog"
          aria-label="Book a 30 minute meeting"
          aria-describedby="calendlyHint"
        >
            <div class="schedule-body flow-m">
              <div class="schedule-top">
                <div>
                  <h3 class="schedule-title">30 Min Alignment</h3>
                <h4 class="schedule-sub">Align, decide, unblock</h4>
                </div>
              </div>

            <p class="schedule-desc">
              Great for reviewing work in progress, clarifying requirements, or mapping a workflow.
              We’ll surface tradeoffs, make a clear decision, and define who does what next.
            </p>
          </div>

          <div class="schedule-footer">
            <div class="schedule-cta">Book 30 Minutes</div>
          </div>
          <div class="schedule-clock" aria-hidden="true">
            <div class="clock desktop">
              <svg
                viewBox="0 0 256 256"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                aria-hidden="true"
              >
                <defs>
                  <clipPath id="bell-clip-30" clipPathUnits="userSpaceOnUse">
                    <rect x="0" y="0" width="256" height="48" />
                  </clipPath>
                </defs>

                <ellipse
                  cx="76"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(-30 76 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-30)"
                />
                <ellipse
                  cx="180"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(30 180 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-30)"
                />

                <circle
                  cx="128"
                  cy="30"
                  r="6"
                  stroke="currentColor"
                  stroke-width="8"
                  fill="currentColor"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="86"
                  stroke="currentColor"
                  stroke-width="20"
                  fill="none"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="10"
                  fill="currentColor"
                />

                <rect
                  x="86"
                  y="204"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(25 86 204)"
                  fill="currentColor"
                />
                <rect
                  x="146"
                  y="212"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(-25 146 204)"
                  fill="currentColor"
                />
              </svg>

              <div class="pomodoro">
                <div class="arc" data-segments="12" style="--clock-accent: var(--dot-30);"></div>
              </div>

            </div>
          </div>
        </button>

          <button
          class="schedule-card surface"
          type="button"
          data-sched-url="https://calendly.com/mark-w3m/60-min-consult"
          data-sched-title="60 Min Consult"
          aria-haspopup="dialog"
          aria-label="Book a 60 minute consult"
          aria-describedby="calendlyHint"
        >
            <div class="schedule-body flow-m">
              <div class="schedule-top">
                <div>
                <h3 class="schedule-title">60 Min Consult</h3>
                <h4 class="schedule-sub">Deep Dive and Strategize</h4>
              </div>
              </div>

            <p class="schedule-desc">
              Ideal when the problem is messy or the stakes are high. We’ll map the situation clearly,
              identify root causes, and leave with a practical plan you can act on right away.
            </p>
          </div>

          <div class="schedule-footer">
            <div class="schedule-cta">Book 60 Minutes</div>
          </div>
          <div class="schedule-clock" aria-hidden="true">
            <div class="clock desktop">
              <svg
                viewBox="0 0 256 256"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                aria-hidden="true"
              >
                <defs>
                  <clipPath id="bell-clip-60" clipPathUnits="userSpaceOnUse">
                    <rect x="0" y="0" width="256" height="48" />
                  </clipPath>
                </defs>

                <ellipse
                  cx="76"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(-30 76 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-60)"
                />
                <ellipse
                  cx="180"
                  cy="40"
                  rx="26"
                  ry="19"
                  transform="rotate(30 180 40)"
                  fill="currentColor"
                  clip-path="url(#bell-clip-60)"
                />

                <circle
                  cx="128"
                  cy="30"
                  r="6"
                  stroke="currentColor"
                  stroke-width="8"
                  fill="currentColor"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="86"
                  stroke="currentColor"
                  stroke-width="20"
                  fill="none"
                />

                <circle
                  cx="128"
                  cy="132"
                  r="10"
                  fill="currentColor"
                />

                <rect
                  x="86"
                  y="204"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(25 86 204)"
                  fill="currentColor"
                />
                <rect
                  x="146"
                  y="212"
                  width="24"
                  height="40"
                  rx="12"
                  transform="rotate(-25 146 204)"
                  fill="currentColor"
                />
              </svg>

              <div class="pomodoro">
                <div class="arc" data-segments="24" style="--clock-accent: var(--dot-60);"></div>
              </div>

            </div>
          </div>
        </button>
      </div>

      <!-- Overlay for Calendly embed -->
      <div class="overlay-backdrop schedule-overlay" id="scheduleOverlay" role="dialog" aria-modal="true" aria-labelledby="scheduleOverlayTitle" aria-hidden="true">
        <div class="overlay-frame schedule-overlay__frame">
          <div class="overlay-chrome">
            <h3 class="overlay-title" id="scheduleOverlayTitle">Book a time</h3>
            <div class="overlay-actions">
              <button class="btn ghost" type="button" id="scheduleOverlayClose">Close</button>
            </div>
          </div>
          <div class="overlay-body schedule-overlay__body">
            <iframe id="scheduleOverlayFrame" title="Scheduling" loading="lazy" data-lazy></iframe>
          </div>
        </div>
      </div>

      <noscript>
        <div class="callout surface mt-16">
          <p class="fine mb-8">
            JavaScript is disabled, so Calendly popups aren’t available. Use the direct links instead:
          </p>
          <p class="fine m-0">
            <a class="link-accent" href="https://calendly.com/mark-w3m/15-min-chat">Book 15 minutes</a><br />
            <a class="link-accent" href="https://calendly.com/mark-w3m/30-min-alignment">Book 30 minutes</a><br />
            <a class="link-accent" href="https://calendly.com/mark-w3m/60-min-consult">Book 60 minutes</a>
          </p>
        </div>
      </noscript>

      <div class="callout surface no-hover mt-16 flow-s">
        <p class="fine">
          <!-- Update these lines with your real contact info. -->
          Email: <a class="link-accent" href="mailto:mark@we3.design">mark@we3.design</a><br />
        </p>
      </div>
    </section>

    <!-- ==========================================================
         Footer
       ========================================================== -->
    <footer>
      <div class="fine">© <span id="y"></span> Mark Malcolm. Temporary site, full portfolio in progress.</div>
    </footer>

  </main>

  <script>
    /* ==========================================================
       Utility: Current year in footer
       ========================================================== */
    document.getElementById("y").textContent = new Date().getFullYear();

    /* ==========================================================
       Calendly: open popup if available, else fallback to new tab
       ========================================================== */
    function openCalendly(url){
      if (!window.Calendly || !Calendly.initPopupWidget){
        // fallback to new tab on older browsers or if Calendly JS not ready
        const frame = document.getElementById('scheduleOverlayFrame');
        if (frame){
          frame.dataset.src = url;
          frame.src = url;
        } else {
          window.open(url, "_blank", "noopener,noreferrer");
        }
        return;
      }
      Calendly.initPopupWidget({ url: url });
    }

    /* ==========================================================
       Schedule overlay: embed Calendly inline inside overlay
       ========================================================== */
    (function initScheduleOverlay(){
      const overlay = document.getElementById("scheduleOverlay");
      const iframe = document.getElementById("scheduleOverlayFrame");
      const titleEl = document.getElementById("scheduleOverlayTitle");
      const closeBtn = document.getElementById("scheduleOverlayClose");
      const schedButtons = Array.from(document.querySelectorAll("[data-sched-url]"));
      if (!overlay || !iframe || !titleEl || !closeBtn || !schedButtons.length) return;

      const FOCUSABLE_SELECTOR = 'a[href], button:not([disabled]), textarea, input, select, details summary, [tabindex]:not([tabindex="-1"])';
      let lastTrigger = null;

      function open(url, title){
        const safeUrl = (url || "").trim();
        if (!safeUrl) return;
        const sep = safeUrl.includes("?") ? "&" : "?";
        const embedUrl = `${safeUrl}${sep}embed_domain=${location.hostname}&embed_type=Inline`;
        iframe.src = embedUrl;
        titleEl.textContent = title || "Schedule";
        overlay.classList.add("is-open");
        overlay.setAttribute("aria-hidden", "false");
        document.body.classList.add("nav-open");
        trapFocus();
      }

      function close(){
        overlay.classList.remove("is-open");
        overlay.setAttribute("aria-hidden", "true");
        iframe.src = "";
        document.body.classList.remove("nav-open");
        if (lastTrigger) lastTrigger.focus({ preventScroll: true });
      }

      function trapFocus(){
        const focusables = Array.from(overlay.querySelectorAll(FOCUSABLE_SELECTOR)).filter(el => el.offsetParent !== null);
        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        if (first) first.focus({ preventScroll: true });

        function handleTrap(e){
          if (e.key !== "Tab") return;
          if (!focusables.length) return;
          if (e.shiftKey){
            if (document.activeElement === first){
              e.preventDefault();
              last.focus();
            }
          } else {
            if (document.activeElement === last){
              e.preventDefault();
              first.focus();
            }
          }
        }
        overlay.addEventListener("keydown", handleTrap);
        const cleanup = () => overlay.removeEventListener("keydown", handleTrap);
        closeBtn.addEventListener("click", cleanup, { once: true });
        overlay.addEventListener("click", (e) => {
          if (e.target === overlay) cleanup();
        }, { once: true });
      }

      schedButtons.forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          lastTrigger = btn;
          open(btn.dataset.schedUrl, btn.dataset.schedTitle);
        });
      });

      closeBtn.addEventListener("click", close);
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) close();
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && overlay.classList.contains("is-open")) close();
      });
    })();

    /* ==========================================================
       Schedule clocks: segmented ring fill animation
       ========================================================== */
    (function initScheduleClocks(){
      const arcs = Array.from(document.querySelectorAll(".schedule-card .arc"));
      if (!arcs.length) return;

      const startAngle = 0;
      const segmentSize = 9; // fixed so 24 segments fit the full circle (9 + 6 = 15deg each)
      const gapSize = 6;

      arcs.forEach((arc, i) => {
        const segAttr = parseInt(arc.dataset.segments, 10);
        const segmentCount = Number.isFinite(segAttr) && segAttr > 0 ? segAttr : 6;
        let currentSegment = segmentCount;

        const computed = getComputedStyle(arc);
        const color =
          (computed.getPropertyValue("--clock-accent") || "#d46a1f").trim() || "#d46a1f";

        function updateArc(){
          let stops = [];
          let angle = 0;

          for (let idx = 0; idx < currentSegment; idx++){
            const end = angle + segmentSize;
            stops.push(
              `${color} ${angle}deg ${end}deg`,
              `transparent ${end}deg ${end + gapSize}deg`
            );
            angle += segmentSize + gapSize;
          }

          stops.push(`transparent ${angle}deg 360deg`);

          arc.style.background = `conic-gradient(from ${startAngle}deg, ${stops.join(",")})`;
        }

        const clock = arc.closest(".clock");
        const card = arc.closest(".schedule-card");
        const intervalMs = 300;
        const alarmDuration = 1200;
        const wiggleDelay = 500;
        const pauseAfterWiggle = 800;
        const leavePause = 220;
        const refillInterval = intervalMs * 1.5; // refill slightly slower than emptying, one segment at a time
        const restartDelay = 2000; // wait 2s before emptying again after refill

        let intervalId = null;
        let wiggleDelayTimeout = null;
        let alarmTimeout = null;
        let refillTimeout = null;
        let pauseTimeout = null;
        let refillTimerId = null;
        let restartTimeout = null;
        let hover = false;
        let isAlarming = false;

        function triggerAlarm(){
          if (!clock) return;
          if (isAlarming) return;
          isAlarming = true;
          clearTimeout(wiggleDelayTimeout);
          clearTimeout(alarmTimeout);
          clearTimeout(refillTimeout);
          clock.classList.add("alarm");
          alarmTimeout = setTimeout(() => {
            clock.classList.remove("alarm");
            refillTimeout = setTimeout(() => {
              startRefill();
            }, pauseAfterWiggle);
            isAlarming = false;
          }, alarmDuration);
        }

        function tick(){
          if (currentSegment <= 0){
            stopCountdown();
            wiggleDelayTimeout = setTimeout(triggerAlarm, wiggleDelay);
            return;
          }
          currentSegment--;
          updateArc();
          if (currentSegment === 0){
            stopCountdown();
            wiggleDelayTimeout = setTimeout(triggerAlarm, wiggleDelay);
          }
        }

        function startCountdown(){
          if (intervalId || !hover || isAlarming || refillTimerId) return;
          clearTimeout(pauseTimeout);
          intervalId = setInterval(tick, intervalMs);
        }

        function stopCountdown(){
          if (intervalId){
            clearInterval(intervalId);
            intervalId = null;
          }
        }

        function resetTimers(){
          stopCountdown();
          clearTimeout(wiggleDelayTimeout);
          clearTimeout(alarmTimeout);
          clearTimeout(refillTimeout);
          if (refillTimerId){
            clearInterval(refillTimerId);
            refillTimerId = null;
          }
          if (restartTimeout){
            clearTimeout(restartTimeout);
            restartTimeout = null;
          }
          isAlarming = false;
        }

        function handleLeave(){
          hover = false;
          resetTimers();
          pauseTimeout = setTimeout(() => {
            clock?.classList.remove("alarm");
            startRefill(false);
          }, leavePause);
        }

        function handleEnter(){
          hover = true;
          clearTimeout(pauseTimeout);
          clearTimeout(wiggleDelayTimeout);
          clearTimeout(alarmTimeout);
          clearTimeout(refillTimeout);
          clock?.classList.remove("alarm");
          if (refillTimerId){
            // let the existing refill finish and restart after delay
            return;
          }
          if (currentSegment >= segmentCount){
            startCountdown();
          } else {
            startRefill(true);
          }
        }

        function startRefill(autoRestart = true){
          if (refillTimerId){
            clearInterval(refillTimerId);
            refillTimerId = null;
          }
          // if already partially filled, keep from current level upward
          refillTimerId = setInterval(() => {
            if (currentSegment < segmentCount){
              currentSegment++;
              updateArc();
            } else {
              clearInterval(refillTimerId);
              refillTimerId = null;
              const shouldRestart = autoRestart && (hover || (card && card.matches(":hover")));
              if (shouldRestart){
                restartTimeout = setTimeout(() => {
                  startCountdown();
                }, restartDelay);
              }
            }
          }, refillInterval);
        }

        // Initial render full ring, no motion
        updateArc();

        // Slight stagger so any first hover starts at different offsets
        setTimeout(() => {
          if (card){
            card.addEventListener("mouseenter", handleEnter);
            card.addEventListener("focusin", handleEnter);
            card.addEventListener("mouseleave", handleLeave);
            card.addEventListener("focusout", handleLeave);
          }
        }, i * 120);
      });
    })();

    /* ==========================================================
       Lazy-load fallback for iframe loading support (Safari <16.4)
       ========================================================== */
    (function initIframeLazyFallback(){
      const supportsLoading = 'loading' in HTMLIFrameElement.prototype;
      if (supportsLoading) return;
      const frames = document.querySelectorAll('iframe[data-lazy]');
      frames.forEach(frame => {
        // If a src was deferred elsewhere, set it here when unsupported.
        if (!frame.src && frame.dataset.src){
          frame.src = frame.dataset.src;
        }
        frame.removeAttribute('loading');
      });
    })();

    /* ==========================================================
       Schedule CTA: hover delay on desktop, in-view reveal on mobile
       ========================================================== */
    (function initScheduleCtaReveal(){
      const cards = Array.from(document.querySelectorAll(".schedule-card"));
      if (!cards.length) return;

      const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const isCoarse = window.matchMedia && window.matchMedia("(pointer: coarse)").matches;

      // If reduced motion, just show them
      if (prefersReduced){
        cards.forEach(c => c.classList.add("is-visible"));
        return;
      }

      // In-view reveal for touch / coarse pointers
      if (isCoarse){
        const io = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting){
              entry.target.classList.add("is-visible");
              io.unobserve(entry.target);
            }
          });
        }, { threshold: 0.4 });
        cards.forEach(card => io.observe(card));
        return;
      }

      // For fine pointers (mouse), rely on hover/focus already handled in CSS.
      // But ensure keyboard focus also shows:
      cards.forEach(card => {
        card.addEventListener("focusin", () => card.classList.add("is-visible"));
        card.addEventListener("focusout", () => card.classList.remove("is-visible"));
      });
    })();

    /* ==========================================================
       Help: Service detail content (single source of truth)
       ========================================================== */
    const HELP_DETAILS = {
      ux: {
        title: "UX Strategy for Complex Workflows",
        desc: "When people keep asking the same questions, the process isn’t clear enough yet. I turn tribal knowledge into clear workflows, tighten the handoffs, and make the next step obvious.",
        bullets: [
          "Workflow mapping that shows where people get stuck",
          "Role-based paths and guardrails to reduce mistakes",
          "Clear requirements and edge cases so dev can ship confidently",
          "Prototype and validate before you build the expensive thing",
          "Simple, practical handoff that holds up in the real world"
        ]
      },
      systems: {
        title: "Design Systems and UI Architecture",
        desc: "If your interface depends on who designed it that week, you don’t have a system yet. I build the components and rules that keep everything aligned.",
        bullets: [
          "Component inventory and standards that reduce redesign",
          "Patterns for forms, tables, empty states, and errors",
          "Spacing, typography, and layout rules that scale",
          "Accessible-by-default choices, so fewer surprises later",
          "Practical documentation developers actually use"
        ]
      },
      brand: {
        title: "Brand Strategy, Copywriting, and Visual Design",
        desc: "If you sound different in every deck, page, and email, people can’t form a clear picture of you. I align voice, visuals, and messaging to make the brand feel cohesive and trustworthy.",
        bullets: [
          "Clear positioning and a voice that sounds human",
          "Messaging frameworks that stay consistent across channels",
          "Visual systems that look modern without trying too hard",
          "Copy that explains complex things in plain language",
          "Lightweight guidelines your team can reuse"
        ]
      },
      training: {
        title: "Training That Scales",
        desc: "Growth breaks when the know-how lives with one person. We capture your process and turn it into clear onboarding, training, and playbooks so the work stays good as the team gets bigger.",
        bullets: [
          "New-hire onboarding that doesn’t rely on one “go ask Sarah” person",
          "Step-by-step “how we do it here” guides",
          "Playbooks and checklists people actually use",
          "Workshops to roll out changes without confusion",
          "Simple standards that keep quality consistent"
        ]
      }
    };

    /* ==========================================================
       Help: Tabs with keyboard support
       ========================================================== */
    (function initHelpTabs(){
      const tabs = Array.from(document.querySelectorAll('.help-tab'));
      const panels = Array.from(document.querySelectorAll('.help-panel'));
      const tablist = document.querySelector('.help-tabs');
      if (!tabs.length || !panels.length) return;

      const HL_CLASSES = ['hl','hl--multi','bio-highlight','hl-amber','hl-blue','hl-teal','hl-purple','hl-green','hl-cyan','hl-lavender','hl-magenta'];

      function setTabHighlight(tab, isActive){
        const span = tab.querySelector('.tab-highlight');
        if (!span) return;
        HL_CLASSES.forEach(c => span.classList.remove(c));
        span.classList.remove('is-on');
        if (isActive){
          const tone = span.dataset.hlClass || 'hl-amber';
          span.classList.add('hl','hl--multi','bio-highlight', tone, 'is-on');
        }
      }

      function activate(tab){
        const targetId = tab.getAttribute('aria-controls');
        const rgb = tab.dataset.hlRgb || '155,122,247';
        const card = tab.closest('.help-card');
        if (card){
          card.style.setProperty('--tab-hl-rgb', rgb);
        }
        tabs.forEach(t => {
          const isActive = t === tab;
          t.classList.toggle('is-active', isActive);
          t.setAttribute('aria-selected', isActive ? 'true' : 'false');
          t.setAttribute('tabindex', isActive ? '0' : '-1');
          setTabHighlight(t, isActive);
        });
        panels.forEach(panel => {
          const match = panel.id === targetId;
          panel.classList.toggle('is-active', match);
          if (match){
            panel.removeAttribute('hidden');
          } else {
            panel.setAttribute('hidden', '');
          }
        });
        tab.focus({ preventScroll: true });
      }

      function onKeyDown(e){
        if (!['ArrowLeft','ArrowRight','Home','End'].includes(e.key)) return;
        e.preventDefault();
        const currentIndex = tabs.indexOf(document.activeElement);
        if (currentIndex === -1) return;
        let nextIndex = currentIndex;
        if (e.key === 'ArrowLeft') nextIndex = (currentIndex - 1 + tabs.length) % tabs.length;
        if (e.key === 'ArrowRight') nextIndex = (currentIndex + 1) % tabs.length;
        if (e.key === 'Home') nextIndex = 0;
        if (e.key === 'End') nextIndex = tabs.length - 1;
        tabs[nextIndex].focus();
      }

      tabs.forEach(tab => {
        tab.addEventListener('click', () => activate(tab));
        tab.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' '){
            e.preventDefault();
            activate(tab);
          }
        });
        tab.addEventListener('focusin', () => {
          setTabHighlight(tab, true);
        });
        tab.addEventListener('focusout', () => {
          if (!tab.classList.contains('is-active')){
            setTabHighlight(tab, false);
          }
        });
      });

      if (tablist){
        tablist.addEventListener('keydown', onKeyDown);
      }

      // Activate first tab by default
      activate(tabs.find(t => t.classList.contains('is-active')) || tabs[0]);
    })();

    /* ==========================================================
       Help: Mobile accordion (one open at a time)
       ========================================================== */
    (function initHelpAccordion(){
      const wrap = document.querySelector(".help-accordion");
      if (!wrap) return;
      const details = Array.from(wrap.querySelectorAll("details"));
      if (!details.length) return;

      details.forEach((item) => {
        item.addEventListener("toggle", () => {
          if (!item.open) return;
          details.forEach((other) => {
            if (other !== item) other.open = false;
          });
        });
      });
    })();

    /* ==========================================================
       Ticker: motion, pause/play, speed buttons, out-of-view reset
       ========================================================== */
    (function initTicker(){
      const track = document.getElementById("tickerTrack");
      const tape = document.getElementById("tickerTape");
      const toggleBtn = document.getElementById("tickerToggle");
      const helper = document.getElementById("tickerHelper");
      const speedBtns = Array.from(document.querySelectorAll("[data-speed]"));

      if (!track || !toggleBtn || !tape) return;

      const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      let paused = prefersReduced ? true : false;
      let userPaused = paused;
      let speed = 0.85;
      let x = 0;
      let raf = null;

      function setToggleUI(){
        toggleBtn.textContent = paused ? "▶" : "⏸";
        toggleBtn.setAttribute("aria-pressed", paused ? "true" : "false");
        toggleBtn.setAttribute("aria-label", paused ? "Resume motion" : "Pause motion");
      }
      function setPaused(next, fromUser = false){
        paused = next;
        if (fromUser) userPaused = next;
        setToggleUI();
      }
      function syncSpeedButtons(){
        speedBtns.forEach(b => {
          const v = parseFloat(b.dataset.speed);
          const isActive = Number.isFinite(v) && Math.abs(v - speed) < 0.001;
          b.setAttribute("aria-pressed", isActive ? "true" : "false");
        });
      }

      function loopWidth(){
        const firstRun = track.querySelector(".tape-run");
        return firstRun ? firstRun.offsetWidth : 0;
      }

      function reset(){
        x = 0;
        tape.style.transform = "translate3d(0,0,0)";
      }

      function step(){
        if (!paused && !prefersReduced){
          x -= speed;

          const w = loopWidth();
          if (w && Math.abs(x) >= w) x = 0;

          const t = performance.now() / 1000;
          const wobbleY = 0;
          const wobbleR = 0;
          const jitter = 0;

          tape.style.transform =
            `translate3d(${x}px, ${wobbleY + jitter}px, 0) rotate(${wobbleR}deg)`;
        }

        raf = requestAnimationFrame(step);
      }

      function start(){
        if (raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(step);
      }

      toggleBtn.addEventListener("click", () => {
        setPaused(!paused, true);
      });

      speedBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          const v = parseFloat(btn.dataset.speed);
          if (!Number.isFinite(v)) return;
          speed = v;
          syncSpeedButtons();
          if (helper){
            helper.innerHTML = paused
              ? "<em>Tip: Click <span class=\"no-italic\">▶</span> to resume motion.</em>"
              : "<em>Tip: Click <span class=\"no-italic\">⏸</span> to stop motion.</em>";
          }
        });
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (!e.isIntersecting){
            reset();
            setPaused(true, false);
          } else if (!prefersReduced){
            if (!userPaused) setPaused(false, false);
          }
        });
      }, { threshold: 0 });

      const bleed = document.querySelector(".ticker-bleed");
      if (bleed) observer.observe(bleed);

      setToggleUI();
      syncSpeedButtons();
      if (prefersReduced) return;
      start();
    })();

    /* ==========================================================
       Bio highlight reveal (sequential with pause on tablet/desktop)
       ========================================================== */
    (function initBioHighlights(){
      const highlights = Array.from(document.querySelectorAll(".bio-highlight:not(.tab-highlight)"));
      if (!highlights.length) return;

      const prefersReduce = window.matchMedia("(prefers-reduced-motion: reduce)");
      const isNarrow = window.matchMedia("(max-width: 720px)");

      // Mobile or reduced motion: show all immediately
      if (isNarrow.matches || prefersReduce.matches){
        highlights.forEach(el => el.classList.add("is-on"));
        return;
      }

      const fillDuration = 1080; // ms (matches CSS hl-fill duration)
      const pauseBetween = 1500; // ms between phrase starts

      function revealSequential(){
        let delay = 0;
        highlights.forEach((el) => {
          setTimeout(() => {
            el.classList.add("is-on");
          }, delay);
          delay += pauseBetween + fillDuration;
        });
      }

      let revealed = false;
      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (revealed) return;
          if (entry.isIntersecting){
            revealed = true;
            revealSequential();
            io.disconnect();
          }
        });
      }, { threshold: 0.25 });

      io.observe(highlights[0]);
    })();

    /* ==========================================================
       Fortune cookie: small delight
       ========================================================== */
    (function initFortuneCookie(){
      const cookieBtn = document.getElementById("cookieBtn");
      const stage = document.getElementById("fortuneStage");
      const fortuneText = document.getElementById("fortuneText");
      const crumbsWrap = document.getElementById("crumbs");

      if (!cookieBtn || !stage || !fortuneText || !crumbsWrap) return;

      const COMMON = [
        "Clarity comes quietly.<br>Confusion leaves when the path is clear.",
        "The next step is small.<br>Small steps remove big doubt.",
        "A good system hums.<br>People stop asking what’s next.",
        "Slow down to see more.<br>Speed follows understanding.",
        "When work feels heavy,<br>Something important is unnamed.",
        "Make the right thing easy.<br>The rest fixes itself.",
        "If everyone agrees too fast,<br>You may be skipping the hard truth."
      ];

      const UNCOMMON = [
        "The problem is shy.<br>Listen longer than feels efficient.",
        "Most friction is a signal,<br>Not a failure of effort.",
        "You don’t need brilliance here.<br>You need alignment.",
        "What feels obvious to you<br>Is invisible to someone else.",
        "Strong systems reduce heroics.<br>Good teams rest better."
      ];

      const RARE = [
        "The map is not wrong.<br>It’s just missing a traveler.",
        "This will work,<br>Once you stop solving yesterday’s version."
      ];

      const ULTRA_RARE = [
        "You are not behind.<br>The interface is."
      ];

      const POOLS = [
        { weight: 70, items: COMMON },
        { weight: 25, items: UNCOMMON },
        { weight: 5, items: RARE }
      ];

      function pickWeightedPool(){
        const total = POOLS.reduce((sum, p) => sum + p.weight, 0);
        let r = Math.random() * total;
        for (const p of POOLS){
          r -= p.weight;
          if (r <= 0) return p.items;
        }
        return POOLS[POOLS.length - 1].items;
      }

      let lastIndex = -1;
      function pickFrom(list){
        if (list.length === 1) return 0;
        let i = Math.floor(Math.random() * list.length);
        while (i === lastIndex) i = Math.floor(Math.random() * list.length);
        lastIndex = i;
        return i;
      }

      function setFortune(){
        const useUltra = Math.random() < 0.01;
        const list = useUltra ? ULTRA_RARE : pickWeightedPool();
        const idx = pickFrom(list);
        fortuneText.innerHTML = list[idx];
      }

      function clearCrumbs(){
        crumbsWrap.innerHTML = "";
      }

      function spawnCrumbs(){
        clearCrumbs();
        const count = 14;
        for (let i = 0; i < count; i++){
          const c = document.createElement("span");
          c.className = "crumb";

          const x = 120 + (Math.random() * 100 - 50);
          const y = 26 + (Math.random() * 26 - 10);
          c.style.left = x + "px";
          c.style.top = y + "px";

          const dx = (Math.random() * 46 - 23).toFixed(1) + "px";
          const dr = (Math.random() * 240 - 120).toFixed(0) + "deg";
          c.style.setProperty("--dx", dx);
          c.style.setProperty("--dr", dr);
          const scale = (0.45 + Math.random() * 0.45).toFixed(2);
          c.style.setProperty("--scale", scale);

          c.style.animationDelay = (Math.random() * 0.12).toFixed(2) + "s";
          c.style.opacity = "0";

          crumbsWrap.appendChild(c);
        }
      }

      function openCookie(){
        if (cookieBtn.classList.contains("is-open")) return;
        cookieBtn.classList.add("is-open");
        spawnCrumbs();
      }

      function closeAndReset(){
        cookieBtn.classList.remove("is-open");
        clearCrumbs();
        setFortune();
      }

      setFortune();

      cookieBtn.addEventListener("mouseenter", openCookie);
      cookieBtn.addEventListener("focus", openCookie);
      cookieBtn.addEventListener("click", openCookie);

      const io = new IntersectionObserver((entries) => {
        for (const entry of entries){
          if (!entry.isIntersecting){
            closeAndReset();
          }
        }
      }, { threshold: 0.15 });

      io.observe(stage);
    })();

    /* ==========================================================
       Section title bars: consistent scale + scroll emphasis
       ========================================================== */
    (function initSectionBars(){
      const titles = Array.from(document.querySelectorAll(".section-title"));
      if (!titles.length || !("IntersectionObserver" in window)) return;

      const bySection = new Map();
      titles.forEach((title) => {
        const section = title.closest("section");
        if (!section) return;
        bySection.set(section, title);
      });

      const minScale = 0.35;
      const maxScale = 1.01;

      function setScale(section, ratio){
        const title = bySection.get(section);
        if (!title) return;
        const t = Math.max(0, Math.min(1, ratio));
        const scale = minScale + (maxScale - minScale) * t;
        title.style.setProperty("--bar-scale", scale.toFixed(3));
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (!bySection.has(entry.target)) return;
          setScale(entry.target, entry.intersectionRatio);
        });
      }, { threshold: [0, 0.15, 0.3, 0.45, 0.6, 0.75, 0.9, 1] });

      bySection.forEach((_, section) => io.observe(section));
    })();

    (function initThemeToggle(){
      const toggle = document.querySelector("[data-theme-toggle]");
      if (!toggle) return;

      const STORAGE_KEY = "we3_theme_mode";
      const prefers = window.matchMedia ? window.matchMedia("(prefers-color-scheme: dark)") : null;

      function safeRead(){
        if (!window.localStorage) return null;
        try { return localStorage.getItem(STORAGE_KEY); }
        catch (err){ return null; }
      }
      function safeWrite(value){
        if (!window.localStorage) return;
        try { localStorage.setItem(STORAGE_KEY, value); }
        catch (err){ /* ignore */ }
      }

      let manualTheme = null;
      let currentTheme = null;

      const stored = safeRead();
      if (stored === "dark" || stored === "light"){
        manualTheme = stored;
      }

      function refreshButton(){
        const srText = toggle.querySelector(".sr-only");
        const label = currentTheme === "dark" ? "Switch to light mode" : "Switch to dark mode";
        if (srText) srText.textContent = label;
        toggle.setAttribute("aria-pressed", currentTheme === "dark" ? "true" : "false");
        toggle.setAttribute("aria-label", label);
        toggle.setAttribute("title", label);
      }

      function inspectSystem(){
        return prefers && prefers.matches ? "dark" : "light";
      }

      function syncTheme(){
        if (manualTheme){
          document.documentElement.setAttribute("data-theme", manualTheme);
          currentTheme = manualTheme;
        } else {
          document.documentElement.removeAttribute("data-theme");
          currentTheme = inspectSystem();
        }
        refreshButton();
      }

      toggle.addEventListener("click", () => {
        manualTheme = currentTheme === "dark" ? "light" : "dark";
        safeWrite(manualTheme);
        syncTheme();
      });

      if (prefers){
        const handleChange = () => {
          if (manualTheme) return;
          syncTheme();
        };
        if (prefers.addEventListener){
          prefers.addEventListener("change", handleChange);
        } else if (prefers.addListener){
          prefers.addListener(handleChange);
        }
      }

      syncTheme();
    })();

    (function initMoonPhases(){
      const toggle = document.querySelector("[data-theme-toggle]");
      const hero = document.querySelector("header");
      if (!toggle || !hero) return;

      const idleThreshold = 8000;
      const phaseDuration = 30000;
      let idleTimer = null;
      let animationFrame = null;
      let animationStart = null;
      let heroVisible = false;
      let manualInteraction = false;

      function setPhase(value){
        toggle.style.setProperty("--moon-phase", value.toFixed(3));
      }

      function step(timestamp){
        if (!animationStart) animationStart = timestamp;
        const progress = ((timestamp - animationStart) % phaseDuration) / phaseDuration;
        setPhase(progress);
        animationFrame = requestAnimationFrame(step);
      }

      function startPhaseAnimation(){
        if (animationFrame) return;
        animationStart = null;
        animationFrame = requestAnimationFrame(step);
      }

      function stopPhaseAnimation(){
        if (animationFrame){
          cancelAnimationFrame(animationFrame);
          animationFrame = null;
        }
        animationStart = null;
        setPhase(0);
      }

      function scheduleIdle(){
        if (idleTimer) clearTimeout(idleTimer);
        idleTimer = setTimeout(() => {
          manualInteraction = false;
          if (heroVisible){
            startPhaseAnimation();
          }
        }, idleThreshold);
        stopPhaseAnimation();
      }

      function handleInteraction(){
        manualInteraction = true;
        scheduleIdle();
      }

      const observer = new IntersectionObserver(entries => {
        heroVisible = entries.some(entry => entry.isIntersecting && entry.intersectionRatio > 0.6);
        if (!heroVisible){
          stopPhaseAnimation();
        } else {
          scheduleIdle();
        }
      }, { threshold: [0.6] });

      observer.observe(hero);

      ["scroll","keydown","pointerdown","touchstart"].forEach(eventName => {
        window.addEventListener(eventName, () => {
          manualInteraction = true;
          scheduleIdle();
        }, { passive: true });
      });

      document.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "hidden"){
          stopPhaseAnimation();
        } else {
          scheduleIdle();
        }
      });

      scheduleIdle();
    })();

    /* Unified overlay controller: shared shell for work, case, and brand */
    const overlayController = (() => {
      const overlay = document.createElement("div");
      overlay.className = "overlay-backdrop";
      overlay.setAttribute("aria-hidden", "true");
      overlay.innerHTML = `
        <div class="overlay-frame" role="dialog" aria-modal="true" aria-labelledby="overlayTitle">
          <header class="overlay-chrome">
            <h3 class="overlay-title" id="overlayTitle">Preview</h3>
            <div class="overlay-actions">
              <button type="button" class="overlay-nav is-prev" aria-label="Previous" disabled>
                <svg viewBox="0 0 24 24"><path d="M15.6 4.8 9.4 12l6.2 7.2-1.4 1.2L7 12l7.2-8.4z"/></svg>
              </button>
              <button type="button" class="overlay-nav is-next" aria-label="Next" disabled>
                <svg viewBox="0 0 24 24"><path d="M8.4 19.2 14.6 12 8.4 4.8l1.4-1.2L17 12l-7.2 8.4z"/></svg>
              </button>
              <a class="btn ghost overlay-open-tab" target="_blank" rel="noreferrer">Open in New Tab</a>
              <button type="button" class="overlay-close btn ghost" aria-label="Close overlay">Close</button>
            </div>
          </header>
          <div class="overlay-body">
            <div class="gallery-viewport"></div>
          </div>
        </div>
      `;
      document.body.appendChild(overlay);

      const titleEl = overlay.querySelector(".overlay-title");
      const viewport = overlay.querySelector(".gallery-viewport");
      const prevBtn = overlay.querySelector(".overlay-nav.is-prev");
      const nextBtn = overlay.querySelector(".overlay-nav.is-next");
      const closeBtn = overlay.querySelector(".overlay-close");
      const openTabBtn = overlay.querySelector(".overlay-open-tab");

      let items = [];
      let currentIndex = 0;
      let onClose = null;
      let restoreFocus = null;

      function render(){
        if (!items.length) return;
        const item = items[currentIndex];
        titleEl.textContent = item.title || item.alt || "Preview";

        prevBtn.style.display = items.length > 1 ? "inline-flex" : "none";
        nextBtn.style.display = items.length > 1 ? "inline-flex" : "none";
        prevBtn.disabled = currentIndex === 0;
        nextBtn.disabled = currentIndex === items.length - 1;

        if (item.href){
          openTabBtn.style.display = "inline-flex";
          openTabBtn.href = item.href;
        } else {
          openTabBtn.style.display = "none";
          openTabBtn.removeAttribute("href");
        }

        viewport.innerHTML = "";
        if (item.type === "iframe"){
          const iframe = document.createElement("iframe");
          iframe.src = item.src;
          iframe.title = item.title || "Document";
          iframe.loading = "lazy";
          iframe.setAttribute("allowfullscreen", "");
          viewport.appendChild(iframe);
        } else {
          const img = document.createElement("img");
          img.src = item.src;
          img.alt = item.alt || item.title || "Preview";
          img.loading = "lazy";
          img.decoding = "async";
          viewport.appendChild(img);
        }
      }

      function open(list, startIndex = 0, opts = {}){
        items = list;
        currentIndex = Math.max(0, Math.min(startIndex, items.length - 1));
        onClose = opts.onClose || null;
        restoreFocus = opts.trigger || null;
        overlay.classList.add("is-open");
        overlay.style.display = "grid";
        overlay.setAttribute("aria-hidden", "false");
        render();
      }

      function close(){
        overlay.classList.remove("is-open");
        overlay.style.display = "none";
        overlay.setAttribute("aria-hidden", "true");
        viewport.innerHTML = "";
        if (onClose) onClose();
        if (restoreFocus && typeof restoreFocus.focus === "function"){
          restoreFocus.focus({ preventScroll: true });
        }
        onClose = null;
        restoreFocus = null;
      }

      prevBtn.addEventListener("click", (e) => {
        e.preventDefault();
        if (currentIndex > 0){
          currentIndex -= 1;
          render();
        }
      });
      nextBtn.addEventListener("click", (e) => {
        e.preventDefault();
        if (currentIndex < items.length - 1){
          currentIndex += 1;
          render();
        }
      });
      closeBtn.addEventListener("click", (e) => {
        e.preventDefault();
        close();
      });
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) close();
      });
      document.addEventListener("keydown", (e) => {
        if (!overlay.classList.contains("is-open")) return;
        if (e.key === "Escape"){
          e.preventDefault();
          close();
        }
        if (e.key === "ArrowRight"){
          e.preventDefault();
          nextBtn.click();
        }
        if (e.key === "ArrowLeft"){
          e.preventDefault();
          prevBtn.click();
        }
      });

      return {
        openGallery({ title, items, startIndex = 0, trigger, onClose }){
          const list = items.map((item) => ({
            type: "image",
            src: item.src,
            alt: item.alt || item.title || title || "Preview",
            title: title || item.title || item.alt
          }));
          open(list, startIndex, { trigger, onClose });
        },
        openDocument({ title, src, href, trigger }){
          open([{
            type: "iframe",
            src,
            href: href || src,
            title: title || "Document"
          }], 0, { trigger });
        },
        close
      };
    })();

    /* See More -> open shot stack overlay */
    (function initSeeMoreButtons(){
      return; // unified overlay handles openings directly
    })();

    /* Mosaic preview: JS parallax disabled (CSS handles the infinite drift) */
    (function initMosaicParallax(){
      // The new looping columns are pure-CSS; keep JS out to avoid hover jitter.
      return;
    })();

    /* Mosaic spotlight: click a thumb to pause its column and view it large */
    (function initMosaicSpotlight(){
      document.querySelectorAll(".work-mosaic").forEach(mosaic => {
        const allImgs = Array.from(mosaic.querySelectorAll(".work-mosaic__loop img"));
        if (!allImgs.length) return;
        const unique = [];
        const seen = new Set();
        allImgs.forEach(img => {
          const src = img.currentSrc || img.src;
          if (seen.has(src)) return;
          seen.add(src);
          unique.push({
            src,
            alt: img.getAttribute("aria-label") || img.alt || "Preview",
            title: img.getAttribute("aria-label") || img.alt || "Preview"
          });
        });

        allImgs.forEach(img => {
          img.addEventListener("click", (e) => {
            e.preventDefault();
            const loop = img.closest(".work-mosaic__loop");
            if (loop){
              loop.style.animationPlayState = "paused";
            }
            const startIdx = unique.findIndex(item => item.src === (img.currentSrc || img.src));
            overlayController.openGallery({
              title: img.getAttribute("aria-label") || img.alt || "Preview",
              items: unique,
              startIndex: startIdx >= 0 ? startIdx : 0,
              trigger: img,
              onClose: () => {
                if (loop){
                  loop.style.animationPlayState = "";
                }
              }
            });
          });
        });
      });
    })();

    /* Mosaic hover: ease columns to a pause, then resume on exit */
    (function initMosaicHoverPause(){
      const loops = Array.from(document.querySelectorAll(".work-mosaic__loop"));
      loops.forEach(loop => {
        loop.addEventListener("mouseenter", () => {
          // Pause immediately to keep the hovered image under the cursor
          const current = getComputedStyle(loop).transform;
          loop.style.animationPlayState = "paused";
          // lock the current transform so pausing doesn't jump
          loop.style.transform = current !== "none" ? current : "translateY(0)";
        });

        loop.addEventListener("mouseleave", () => {
          loop.style.animationPlayState = "running";
          loop.style.transform = "";
        });
      });
    })();

    /* Parallax tilt for case study cover */
    (function initCaseParallax(){
      const stages = document.querySelectorAll(".case-cover");
      stages.forEach(stage => {
        const cover = stage;
        if (!cover) return;
        let rafId = null;
        let targetX = 0, targetY = 0;
        let currentX = 0, currentY = 0;

        function animate(){
          currentX += (targetX - currentX) * 0.12;
          currentY += (targetY - currentY) * 0.12;
          cover.style.transform = `translate3d(${currentX}px, ${currentY}px, 0) rotateX(${(-currentY/14)}deg) rotateY(${(currentX/14)}deg)`;
          rafId = requestAnimationFrame(animate);
        }

        function handleMove(e){
          const rect = stage.getBoundingClientRect();
          const nx = (e.clientX - rect.left) / rect.width - 0.5;
          const ny = (e.clientY - rect.top) / rect.height - 0.5;
          targetX = nx * 14;
          targetY = ny * 14;
          if (!rafId) rafId = requestAnimationFrame(animate);
        }

        function reset(){
          targetX = 0; targetY = 0;
        }

        stage.addEventListener("mousemove", handleMove);
        stage.addEventListener("mouseleave", reset);
        stage.addEventListener("mouseenter", () => { if (!rafId) rafId = requestAnimationFrame(animate); });
      });
    })();

    /* Sync ribbon row height to half of rendered cover height */
    (function syncCaseCoverHeights(){
      function updateHeight(stage){
        const coverImg = stage.querySelector(".case-cover img");
        if (!coverImg) return;
        const h = coverImg.getBoundingClientRect().height;
        if (h > 0){
          stage.style.setProperty("--cover-height", `${h}px`);
        }
      }
      const stages = document.querySelectorAll(".case-cover");
      stages.forEach(stage => {
        const img = stage.querySelector("img");
        if (!img) return;
        if (img.complete){
          updateHeight(stage);
        } else {
          img.addEventListener("load", () => updateHeight(stage), { once:true });
        }
      });
      window.addEventListener("resize", () => {
        stages.forEach(stage => updateHeight(stage));
      }, { passive:true });
    })();

    /* Case media click should reuse the shot-stack (work) overlay */
    (function initCaseStageToStack(){
      return; // handled by unified overlay hooks
    })();


    (function initShotStacks(){
      const stacks = Array.from(document.querySelectorAll(".shot-stack"));
      stacks.forEach((stack) => {
        const imgs = Array.from(stack.querySelectorAll(".shot-card img")).filter(img => !img.closest(".is-cap"));
        if (!imgs.length) return;

        const title =
          stack.getAttribute("data-overlay-title") ||
          stack.closest(".case-item")?.querySelector("h4")?.textContent ||
          "Case Study";

        function open(startIndex = 0, trigger = null){
          overlayController.openGallery({
            title,
            items: imgs.map(img => ({
              src: img.getAttribute("src") || img.currentSrc || "",
              alt: img.alt || title,
              title
            })),
            startIndex,
            trigger
          });
        }

        stack.addEventListener("click", (event) => {
          event.preventDefault();
          const targetImg = event.target.tagName === "IMG" ? event.target : null;
          const idx = targetImg ? imgs.indexOf(targetImg) : 0;
          open(Math.max(0, idx), stack);
        });

        if (stack.id){
          document.querySelectorAll(`[data-open-stack="#${stack.id}"]`).forEach(triggerEl => {
            triggerEl.addEventListener("click", (e) => {
              e.preventDefault();
              open(0, triggerEl);
            });
          });
        }
      });
    })();

    /* Brand guideline overlay */
    (function initBrandOverlay(){
      document.querySelectorAll("[data-brand-link]").forEach(link => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const src = link.getAttribute("href");
          const title = link.getAttribute("data-title") || link.textContent.trim() || "Brand Guidelines";
          if (!src) return;
          overlayController.openDocument({
            title,
            src,
            href: src,
            trigger: link
          });
        });
      });
    })();

    (function initMobileNav(){
      const toggle = document.querySelector(".nav-toggle");
      const panel = document.getElementById("mobileNavPanel");
      if (!toggle || !panel) return;

      const closeBtn = panel.querySelector(".mobile-nav-close");
      const links = Array.from(panel.querySelectorAll("a"));

      function setOpen(open){
        panel.classList.toggle("is-open", open);
        panel.setAttribute("aria-hidden", open ? "false" : "true");
        toggle.setAttribute("aria-expanded", open ? "true" : "false");
        document.body.classList.toggle("nav-open", open);
      }

      toggle.addEventListener("click", () => {
        setOpen(!panel.classList.contains("is-open"));
      });

      closeBtn?.addEventListener("click", () => setOpen(false));
      panel.addEventListener("click", (event) => {
        if (event.target === panel) setOpen(false);
      });
      links.forEach(link => link.addEventListener("click", () => setOpen(false)));
    })();

    (function initScrollNav(){
      const navEl = document.querySelector(".nav");
      if (!navEl) return;
      let lastY = window.scrollY;
      let latestY = lastY;
      let ticking = false;

      function update(){
        ticking = false;
        if (document.body.classList.contains("nav-open")){
          navEl.classList.remove("nav-hidden");
          lastY = window.scrollY;
          return;
        }

        latestY = window.scrollY;
        const delta = latestY - lastY;
        if (Math.abs(delta) < 10){
          return;
        }
        if (delta > 0 && latestY > 60){
          navEl.classList.add("nav-hidden");
        } else {
          navEl.classList.remove("nav-hidden");
        }
        lastY = latestY;
      }

      window.addEventListener("scroll", () => {
        if (ticking) return;
        ticking = true;
        requestAnimationFrame(update);
      }, { passive: true });
    })();
  </script>

</body>
</html>
